var globalThis=this,global=this;function __skpm_run(key,context){globalThis.context=context;try{var exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){var r=n(6),i=n(10),o=n(11),a=n(13),l=n(14),s=n(15),c=n(16),u=n(7),d=n(17);function h(e){var t=(e=e||{}).identifier||NSUUID.UUID().UUIDString(),n=NSThread.mainThread().threadDictionary(),f=h.fromId(t);if(f)return f;var m=new r;if(m.id=t,e.modal&&!e.parent)throw new Error("A modal needs to have a parent.");var S=coscript.createFiber(),g=e.width||800,y=e.height||600,p=NSScreen.screens().firstObject().frame(),b=NSMakeRect(void 0!==e.x?e.x:Math.round((NSWidth(p)-g)/2),void 0!==e.y?NSHeight(p)-e.y:Math.round((NSHeight(p)-y)/2),g,y);e.titleBarStyle&&"default"!==e.titleBarStyle&&(e.frame=!1);var v="textured"!==e.windowType,w=NSTitledWindowMask;!1!==e.minimizable&&(w|=NSMiniaturizableWindowMask),!1!==e.closable&&(w|=NSClosableWindowMask),!1!==e.resizable&&(w|=NSResizableWindowMask),v&&!e.transparent&&!1!==e.frame||(w|=NSTexturedBackgroundWindowMask);var x=NSPanel.alloc().initWithContentRect_styleMask_backing_defer(b,w,NSBackingStoreBuffered,!0),M=WKWebViewConfiguration.alloc().init(),N=WKWebView.alloc().initWithFrame_configuration(CGRectMake(0,0,e.width||800,e.height||600),M);if(s(N),N.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),i(m,x,N),o(m,x,N),d(m,x,N,e),"desktop"===e.windowType&&(x.setLevel(kCGDesktopWindowLevel-1),x.setCollectionBehavior(NSWindowCollectionBehaviorCanJoinAllSpaces|NSWindowCollectionBehaviorStationary|NSWindowCollectionBehaviorIgnoresCycle)),void 0===e.minWidth&&void 0===e.minHeight||m.setMinimumSize(e.minWidth||0,e.minHeight||0),void 0===e.maxWidth&&void 0===e.maxHeight||m.setMaximumSize(e.maxWidth||1e4,e.maxHeight||1e4),e.transparent||!1===e.frame){x.titlebarAppearsTransparent=!0,x.titleVisibility=NSWindowTitleHidden,x.setOpaque(0),x.isMovableByWindowBackground=!0;var D=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");D.setShowsBaselineSeparator(!1),x.setToolbar(D)}if("hiddenInset"===e.titleBarStyle){var C=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");C.setShowsBaselineSeparator(!1),x.setToolbar(C)}!1!==e.frame&&e.useContentSize||m.setSize(g,y),e.center&&m.center(),e.alwaysOnTop&&m.setAlwaysOnTop(!0),e.fullscreen&&m.setFullScreen(!0),m.setFullScreenable(!!e.fullscreenable);const E=e.title||("undefined"!=typeof __command&&__command.pluginBundle()?__command.pluginBundle().name():void 0);E&&m.setTitle(E);var _=e.backgroundColor;e.transparent&&(_=NSColor.clearColor()),!_&&!1===e.frame&&e.vibrancy&&(_=NSColor.clearColor()),m._setBackgroundColor(_||NSColor.windowBackgroundColor()),!1===e.hasShadow&&m.setHasShadow(!1),void 0!==e.opacity&&m.setOpacity(e.opacity),e.webPreferences=e.webPreferences||{},N.configuration().preferences().setValue_forKey(!1!==e.webPreferences.devTools,"developerExtrasEnabled"),N.configuration().preferences().setValue_forKey(!1!==e.webPreferences.javascript,"javaScriptEnabled"),N.configuration().preferences().setValue_forKey(!!e.webPreferences.plugins,"plugInsEnabled"),N.configuration().preferences().setValue_forKey(e.webPreferences.minimumFontSize||0,"minimumFontSize"),e.webPreferences.zoomFactor&&N.setMagnification(e.webPreferences.zoomFactor);var k=x.contentView();return!1!==e.frame?(N.setFrame(k.bounds()),k.addSubview(N)):(k.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),a(k,k.superview()),N.setFrame(k.bounds()),k.addSubview(N),x.standardWindowButton(NSWindowFullScreenButton)&&x.standardWindowButton(NSWindowFullScreenButton).setHidden(!0),e.titleBarStyle&&"default"!==e.titleBarStyle||(x.standardWindowButton(NSWindowZoomButton).setHidden(!0),x.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),x.standardWindowButton(NSWindowCloseButton).setHidden(!0),x.standardWindowButton(NSWindowZoomButton).setEnabled(!1))),e.vibrancy&&m.setVibrancy(e.vibrancy),m.setMaximizable(!1!==e.maximizable),x.setHidesOnDeactivate(!1!==e.hidesOnDeactivate),e.remembersWindowFrame&&(x.setFrameAutosaveName(t),x.setFrameUsingName_force(x.frameAutosaveName(),!1)),e.acceptsFirstMouse&&m.on("focus",(function(e){e.type()===NSEventTypeLeftMouseDown&&m.webContents.executeJavaScript(l(N,e)).catch(()=>{})})),u.injectScript(N),c.injectScript(N),c.setupHandler(m),!1!==e.show&&m.show(),m.on("closed",(function(){m._destroyed=!0,n.removeObjectForKey(t),S.cleanup()})),n[t]=x,S.onCleanup((function(){m._destroyed||m.destroy()})),m}h.fromId=function(e){var t=NSThread.mainThread().threadDictionary();if(t[e])return h.fromPanel(t[e],e)},h.fromPanel=function(e,t){var n=new r;if(n.id=t,!e||!e.contentView)throw new Error("needs to pass an NSPanel");for(var a=null,l=e.contentView().subviews(),s=0;s<l.length;s+=1)a||l[s].isKindOfClass(WKInspectorWKWebView)||!l[s].isKindOfClass(WKWebView)||(a=l[s]);if(!a)throw new Error("The panel needs to have a webview");return i(n,e,a),o(n,e,a),n},e.exports=h},,function(e,t,n){var r=NSThread.mainThread().threadDictionary();e.exports.getWebview=function(e){return n(0).fromId(e)},e.exports.isWebviewPresent=function(e){return!!r[e]},e.exports.sendToWebview=function(t,n){if(e.exports.isWebviewPresent(t)){for(var i=null,o=r[t].contentView().subviews(),a=0;a<o.length;a+=1)i||o[a].isKindOfClass(WKInspectorWKWebView)||!o[a].isKindOfClass(WKWebView)||(i=o[a]);if(!i||!i.evaluateJavaScript_completionHandler)throw new Error("Webview "+t+" not found");i.evaluateJavaScript_completionHandler(n,null)}}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,o=n(20),a=n(40),l=n(24),s=!1,c=!0,u={app:"app",no:"no",over:"over",noCon:"nocon"},d="   ðŸ’Ž This Sketch file",h="ðŸ”¸ ",f=["init","alloc","/usr/bin/curl","setLaunchPath","setArguments","pipe","setStandardOutput","setStandardError","launch","waitUntilExit","terminationStatus","readDataToEndOfFile","fileHandleForReading","initWithData_encoding","success","app","purchase","uses","quantity","over","no","noCon"];function m(e,t){var n=NSTask[f[1]]()[f[0]]();n[f[3]](f[2]),n[f[4]](e);var i=NSPipe[f[5]](),o=NSPipe[f[5]]();n[f[6]](i),n[f[7]](o),n[f[8]](),n[f[9]]();var a=n[f[10]](),l=o[f[12]]()[f[11]]();NSString[f[1]]()[f[13]](l,NSUTF8StringEncoding);if(0==a){var s=i[f[12]]()[f[11]](),c=function(e){try{var t=JSON.parse(e);if(t&&"object"===r(t)&&null!==t)return t}catch(n){}return!1}(NSString[f[1]]()[f[13]](s,NSUTF8StringEncoding));return c[f[14]]?t&&null!=c[f[16]]&&c[f[17]]>c[f[16]][f[18]]?u[f[19]]:u[f[15]]:u[f[20]]}return u[f[21]]}var S=["path","mainPluginsFolderURL","/merge.json","startTime","licenseKey","-d","product_permalink=mergeduplicatesymbols","license_key=","","increment_uses_count=","https://api.gumroad.com/v2/licenses/verify"];function g(e,t){return m([S[5],S[6],S[5],S[7]+e+S[8],S[5],S[9]+t.toString()+S[8],S[10]],t)}function y(e,t){NSString.stringWithFormat("%@",e);var n=NSString.stringWithFormat("%@",t);l.writeFileSync(n,JSON.stringify(e),{encoding:"utf8"})}function p(e){return JSON.parse(l.readFileSync(e,{encoding:"utf8"}))}var b=function(e,t){return JSON.parse(l.readFileSync(e,{encoding:"utf8"}))};function v(e){var t,r=n(5).getTheme(),i=a.lab("#"+e);t="dark"===r?a.lab("#212124"):a.lab("#F9F9F9");var l={L:i.l,A:i.a,B:i.b},s={L:t.l,A:t.a,B:t.b},c=o.getDeltaE76(l,s);return parseFloat(c)<30}function w(e,t){var n=!1,r=t.toString().split("[")[1];if(null==r&&(r=t.toString().split("[")[0]),null==r&&(r=t.toString()),null!=r){var i=r.replace("]","");e.toString().indexOf(i)>-1&&(n=!0)}var o=e.toString().split("[")[1];if(null==o&&(o=e.toString().split("[")[0]),null==o&&(o=e.toString()),null!=o){var a=o.replace("]","");t.toString().indexOf(a)>-1&&(n=!0)}return n}function x(e,t){for(var n=0;n<e.length;n++){if(null!=e[n].remoteShareID&&w(e[n].remoteShareID,t.remoteShareID()))return n;if(null!=e[n].duplicates)for(var r=0;r<e[n].duplicates.length;r++){if(null!=e[n].duplicates[r].remoteShareID)if(w(e[n].duplicates[r].remoteShareID,t.remoteShareID()))return[n,r]}}return-1}function M(e,t){for(var n=0;n<e.length;n++)if(null!=e[n].duplicates)for(var r=0;r<e[n].duplicates.length;r++){if(null!=e[n].duplicates[r].remoteShareID)if(w(e[n].duplicates[r].remoteShareID,t.objectID()))return[n,r]}return-1}function N(e){switch(e){case 0:return"Left";case 1:return"Right";case 2:return"Center";case 3:return"Justified";default:return"Natural"}}function D(){return"dark"===n(5).getTheme()?CGColorCreateGenericRGB(70/255,70/255,70/255,1):CGColorCreateGenericRGB(.8,.8,.8,1)}function C(e,t){return e.name<t.name?-1:e.name>t.name?1:0}function E(e,t){return e.name<t.name?-1:e.name>t.name?1:0}function _(e,t){for(var n=0;n<e.length;n++)if(null!=e[n].originalStyle&&0==e[n].originalStyle.remoteShareID().localeCompare(t.objectID()))return!0;return!1}function k(e,t,n,r,i,o,a,l,s,c,u){var d=[];return t.forEach((function(t){try{if(e!=t.textStyle){var n=!1;try{n=e.style().textStyle().attributes().NSFont.familyName()==t.textStyle.style().textStyle().attributes().NSFont.familyName()}catch(v){G("Finding similar text styles - Couldn't disclose font")}var h=!1;try{h=NSFontManager.sharedFontManager().weightOfFont_(e.style().textStyle().attributes().NSFont)==NSFontManager.sharedFontManager().weightOfFont_(t.textStyle.style().textStyle().attributes().NSFont)}catch(v){G("Finding similar text styles - Couldn't disclose weight")}var f=!1;try{f=e.style().textStyle().attributes().NSFont.pointSize()==t.textStyle.style().textStyle().attributes().NSFont.pointSize()}catch(v){G("Finding similar text styles - Couldn't disclose size")}var m=!1;try{m=e.style().textStyle().attributes().MSAttributedStringColorAttribute.hexValue()==t.textStyle.style().textStyle().attributes().MSAttributedStringColorAttribute.hexValue()}catch(v){G("Finding similar text styles - Couldn't disclose color")}var S=!1;try{S=e.style().textStyle().attributes().NSParagraphStyle.paragraphSpacing()==t.textStyle.style().textStyle().attributes().NSParagraphStyle.paragraphSpacing()}catch(v){G("Finding similar text styles - Couldn't disclose paragraph spacing")}var g=!1;try{g=e.style().textStyle().attributes().NSParagraphStyle.minimumLineHeight()==t.textStyle.style().textStyle().attributes().NSParagraphStyle.minimumLineHeight()}catch(v){G("Finding similar text styles - Couldn't disclose line height")}var y=!1;try{y=e.style().textStyle().attributes().NSParagraphStyle.alignment()==t.textStyle.style().textStyle().attributes().NSParagraphStyle.alignment()}catch(v){G("Finding similar text styles - Couldn't disclose alignment")}var p=!1;try{p=e.style().textStyle().attributes().NSKern.toString()==t.textStyle.style().textStyle().attributes().NSKern.toString()}catch(w){p=e.style().textStyle().attributes().NSKern==t.textStyle.style().textStyle().attributes().NSKern}var b=!0;r&&(b=b&&n),i&&(b=b&&h),o&&(b=b&&f),a&&(b=b&&m),l&&(b=b&&S),s&&(b=b&&g),c&&(b=b&&y),u&&(b=b&&p),b&&d.push(t)}}catch(v){G("There was an issue finding similar text styles")}})),d}function O(e,t,n,r,i,o,a,l){var s=[];return t.forEach((function(t){try{if(e!=t.layerStyle){var n=!1;null!=e.style().firstEnabledFill()&&null!=t.layerStyle.style().firstEnabledFill()&&(n=e.style().firstEnabledFill().color().immutableModelObject().hexValue().toString()==t.layerStyle.style().firstEnabledFill().color().immutableModelObject().hexValue().toString());var c=!1;null!=e.style().firstEnabledBorder()&&null!=t.layerStyle.style().firstEnabledBorder()&&(c=e.style().firstEnabledBorder().color().immutableModelObject().hexValue().toString()==t.layerStyle.style().firstEnabledBorder().color().immutableModelObject().hexValue().toString());var u=!1;null!=e.style().firstEnabledBorder()&&null!=t.layerStyle.style().firstEnabledBorder()&&(u=e.style().firstEnabledBorder().thickness()==t.layerStyle.style().firstEnabledBorder().thickness());var d=!1;null!=e.style().firstEnabledShadow()&&null!=t.layerStyle.style().firstEnabledShadow()&&(d=e.style().firstEnabledShadow().color().immutableModelObject().hexValue().toString()==t.layerStyle.style().firstEnabledShadow().color().immutableModelObject().hexValue().toString());var h=!1;null!=e.style().firstEnabledShadow()&&null!=t.layerStyle.style().firstEnabledShadow()&&(h=e.style().firstEnabledShadow().offsetX()==t.layerStyle.style().firstEnabledShadow().offsetX()&&e.style().firstEnabledShadow().offsetY()==t.layerStyle.style().firstEnabledShadow().offsetY()&&e.style().firstEnabledShadow().blurRadius()==t.layerStyle.style().firstEnabledShadow().blurRadius()&&e.style().firstEnabledShadow().spread()==t.layerStyle.style().firstEnabledShadow().spread());var f=!0;r&&(f=f&&n),i&&(f=f&&c),o&&(f=f&&u),a&&(f=f&&d),l&&(f=f&&h),f&&s.push(t)}}catch(m){G("There was an issue finding similar layer styles")}})),s}function F(e,t,n){for(var r=[],i=e.document.documentData().layerTextStyles().objects(),o=0;o<i.count();o++){var a=i.objectAtIndex(o),l=a.style().textStyle().attributes();null!=n?0==n.localeCompare(a.name())&&r.push({attributes:l,textStyle:a,name:""+a.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:T(l),thumbnail:U(a),contrastMode:v(j(a))}):r.push({attributes:l,textStyle:a,name:""+a.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:T(l),thumbnail:U(a),contrastMode:v(j(a))})}(e.document.documentData().foreignTextStyles().forEach((function(e){var t=e.localObject().style().textStyle().attributes(),i=x(r,e),o=V(e.libraryID());-1==i?null!=n?0==n.localeCompare(e.localObject().name())&&r.push({originalStyle:e,attributes:t,textStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=o?o.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:T(t),thumbnail:U(e.localObject()),contrastMode:v(j(e.localObject()))}):r.push({originalStyle:e,attributes:t,textStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=o?o.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:T(t),thumbnail:U(e.localObject()),contrastMode:v(j(e.localObject()))}):r[i].correlativeStyles.push(e)})),t)&&NSApp.delegate().librariesController().availableLibraries().forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&t.document().layerTextStyles().objects().forEach((function(e){if(!_(r,e))if(null!=n){if(0==n.localeCompare(e.name())){var i=e.style().textStyle().attributes();r.push({textStyle:e,attributes:i,name:""+e.name(),libraryName:h+t.name(),foreign:!0,library:t,isSelected:!1,isChosen:!1,description:T(i),thumbnail:U(e),contrastMode:v(j(e))})}}else{i=e.style().textStyle().attributes();r.push({textStyle:e,attributes:i,name:""+e.name(),libraryName:h+t.name(),foreign:!0,library:t,isSelected:!1,isChosen:!1,description:T(i),thumbnail:U(e),contrastMode:v(j(e))})}}))}));return r=r.sort(C)}function I(e){for(var t=e.name(),n="",r=0;r<t.length();r++)n+=t.charAt(r);return n}function P(e,t){for(var n,r=NSMutableArray.array(),i=e.document.pages().objectEnumerator();n=i.nextObject();)for(var o,a=NSPredicate.predicateWithFormat("className == 'MSSymbolInstance' && symbolMaster == %@",t),l=n.children().filteredArrayUsingPredicate(a).objectEnumerator();o=l.nextObject();)r.addObject(o);return r}function L(e,t){for(var n,r=NSMutableArray.array(),i=e.document.pages().objectEnumerator();n=i.nextObject();)for(var o,a=NSPredicate.predicateWithFormat("className == %@ && overrides != nil","MSSymbolInstance"),l=n.children().filteredArrayUsingPredicate(a).objectEnumerator();o=l.nextObject();){var s=o.overrides();R(o,s,r,t,0)}return r}function R(e,t,n,r,i){for(var o in t){var a=t[o].symbolID;null==a?R(e,t[o],n,r,i+1):("function"==typeof a&&(a=a()),0==a.localeCompare(r.symbolID())&&n.addObject(e))}return a}function T(e){var t="",n=String(e.NSFont),r=n.substring(1,n.indexOf("pt."))+"pt";try{t=r+" - "+N(e.NSParagraphStyle.alignment())}catch(i){G("Get text style description - Couldn't disclose alignment"),t=r}return t}function W(e){var t="";return null!=e.style().firstEnabledFill()&&(t+="Fill: #"+e.style().firstEnabledFill().color().immutableModelObject().hexValue().toString()),null!=e.style().firstEnabledFill()&&null!=e.style().firstEnabledBorder()&&(t+=" - "),null!=e.style().firstEnabledBorder()&&(t+="Border: #"+e.style().firstEnabledBorder().color().immutableModelObject().hexValue().toString()),t}function A(e){return null!=e.style().firstEnabledFill()?e.style().firstEnabledFill().color().immutableModelObject().hexValue().toString():null!=e.style().firstEnabledBorder()?e.style().firstEnabledBorder().color().immutableModelObject().hexValue().toString():void 0}function j(e){return e.style().textStyle().attributes().MSAttributedStringColorAttribute?e.style().textStyle().attributes().MSAttributedStringColorAttribute.hexValue().toString():"000000"}function B(e){var t=MSOvalShape.alloc().init();t.frame=MSRect.rectWithRect(NSMakeRect(0,0,100,100)),t.style=e.style(),context.document.currentPage().addLayer(t);var n=H(t,300,300);return t.removeFromParent(),n}function U(e){var t=MSTextLayer.new();t.stringValue="The quick brown fox",t.style=e.style(),context.document.currentPage().addLayer(t);var n=H(t,600,100);return t.removeFromParent(),n}function V(e){for(var t=NSApp.delegate().librariesController().libraries(),n=0;n<t.length;n++){var r=t[n];if(r&&r.libraryID()&&0==r.libraryID().toString().localeCompare(e))return r}return null}function z(e,t,n){for(var r=[],i=e.document.documentData().layerStyles().objects(),o=0;o<i.count();o++){var a=i.objectAtIndex(o);null!=n?0==n.localeCompare(a.name())&&r.push({layerStyle:a,name:""+a.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:W(a),thumbnail:B(a),contrastMode:v(A(a))}):r.push({layerStyle:a,name:""+a.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:W(a),thumbnail:B(a),contrastMode:v(A(a))})}(e.document.documentData().foreignLayerStyles().forEach((function(e){var t=x(r,e),i=V(e.libraryID());-1==t?null!=n?0==n.localeCompare(e.localObject().name())&&r.push({originalStyle:e,layerStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=i?i.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:W(e.localObject()),thumbnail:B(e.localObject()),contrastMode:v(A(e.localObject()))}):r.push({originalStyle:e,layerStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=i?i.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:W(e.localObject()),thumbnail:B(e.localObject()),contrastMode:v(A(e.localObject()))}):r[t].correlativeStyles.push(e)})),t)&&NSApp.delegate().librariesController().libraries().forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&t.document().layerStyles().objects().forEach((function(e){_(r,e)||(null!=n?0==n.localeCompare(e.name())&&r.push({layerStyle:e,name:""+e.name(),libraryName:h+t.name(),foreign:!0,library:t,isSelected:!1,isChosen:!1,description:W(e),thumbnail:B(e),contrastMode:v(A(e))}):r.push({layerStyle:e,name:""+e.name(),libraryName:h+t.name(),foreign:!0,library:t,isSelected:!1,isChosen:!1,description:W(e),thumbnail:B(e),contrastMode:v(A(e))}))}))}));return r=(r=r.sort(C)).sort(C)}function J(e){var t=e.CGImageForProposedRect_context_hints(null,nil,nil),n=NSBitmapImageRep.alloc().initWithCGImage(t);return n.setSize(e.size()),function(e){var t=e;return NSString.stringWithFormat("data:%@;base64,%@","image/png",t.base64EncodedStringWithOptions(0))}(n.representationUsingType_properties(NSPNGFileType,nil))}function H(e,t,n){return""+J(function(e,t,n){var r=MSExportRequest.exportRequestsFromExportableLayer_inRect_useIDForName_(e,e.absoluteInfluenceRect(),!1).firstObject();r.format="png";var i=t/r.rect().size.width,o=n/r.rect().size.height;r.scale=i<o?i:o;var a=NSColorSpace.sRGBColorSpace(),l=MSExporter.exporterForRequest_colorSpace_(r,a).bitmapImageRep(),s=NSImage.alloc().init().autorelease();return s.addRepresentation(l),s}(e,t,n))}function G(e){s&&console.log(e)}var K=["path","mainPluginsFolderURL","/merge.json","logs","librariesEnabledByDefault","log"];e.exports={GetTextBasedOnCount:function(e){return 1!=e?" styles ":" style "},getBase64:H,brightnessByColor:function(e){var t,n=0==(e=""+e).indexOf("#"),r=0==e.indexOf("rgb");if(n&&(t=e.substr(1).match(7==e.length?/(\S{2})/g:/(\S{1})/g)))var i=parseInt(t[0],16),o=parseInt(t[1],16),a=parseInt(t[2],16);if(r&&(t=e.match(/(\d+){3}/g)))i=t[0],o=t[1],a=t[2];if(void 0!==i)return(299*i+587*o+114*a)/1e3},getColorDependingOnBrightness:function(e){return null!=e?"dark"===n(5).getTheme()?e>100&&e<130?MSColor.colorWithRed_green_blue_alpha(.35,.35,.35,1):MSColor.colorWithRed_green_blue_alpha(1,1,1,0):e>230?MSColor.colorWithRed_green_blue_alpha(.8,.8,.8,1):MSColor.colorWithRed_green_blue_alpha(1,1,1,0):MSColor.colorWithRed_green_blue_alpha(1,1,1,0)},isString:function(e){try{return 1==e.isKindOfClass(NSString)}catch(t){return!1}},getAlignment:N,getSymbolInstances:P,containsTextStyle:function(e,t){return e.filter((function(e){return e.textStyle==t})).length>=1},containsLayerStyle:function(e,t){return e.filter((function(e){return e.layerStyle==t})).length>=1},createView:function(e){return NSView.alloc().initWithFrame(e)},getAllTextLayers:function(e){var t=NSMutableArray.array();return e.document.pages().forEach((function(e){for(var n,r=NSPredicate.predicateWithFormat("className == 'MSTextLayer'"),i=e.children().filteredArrayUsingPredicate(r).objectEnumerator();n=i.nextObject();)t.addObject(n)})),t},getAllLayers:function(e){var t=NSMutableArray.array();return e.document.pages().forEach((function(e){for(var n,r=e.children().objectEnumerator();n=r.nextObject();)t.addObject(n)})),t},createSeparator:function(e){var t=NSView.alloc().initWithFrame(e);return t.setWantsLayer(1),t.layer().setBackgroundColor(D()),t},getColorDependingOnTheme:D,compareStyleArrays:C,alreadyInList:_,getIndexOf:function(e,t){for(var n=0;n<t.length;n++)if(0==t[n].localeCompare(e))return n;return-1},FindAllSimilarTextStyles:function(e,t,n,r,i,o,a,l,s,c){for(var u=[],h=[],f=F(e,t,null),m=0;m<f.length;m++)if(G("Finding similar styles to '"+f[m].name+"'"),0==f[m].libraryName.localeCompare(d)&&-1==h.indexOf(f[m])){var S=k(f[m].textStyle,f,0,n,r,i,o,a,l,s,c);h.push(f[m]),S.forEach((function(e){h.push(e)})),S.unshift(f[m]),S.length>1&&u.push({referenceStyle:f[m],similarStyles:S,selectedIndex:-1,isUnchecked:!1})}return u},FindSimilarTextStyles:k,FindAllSimilarLayerStyles:function(e,t,n,r,i,o,a){for(var l=[],s=[],c=z(e,t,null),u=0;u<c.length;u++)if(G("Finding similar styles to '"+c[u].name+"'"),0==c[u].libraryName.localeCompare(d)&&-1==s.indexOf(c[u])){var h=O(c[u].layerStyle,c,0,n,r,i,o,a);s.push(c[u]),h.forEach((function(e){s.push(e)})),h.unshift(c[u]),h.length>1&&l.push({referenceStyle:c[u],similarStyles:h,selectedIndex:-1,isUnchecked:!1})}return l},FindSimilarLayerStyles:O,getDefinedLayerStyles:z,getDefinedTextStyles:F,indexOfForeignStyle:x,IsInTrial:function(){try{var e=b(MSPluginManager[S[1]]()[S[0]]()+S[2]);return null!=e&&null!=e[S[3]]?e[S[3]]:null}catch(t){return null}},ExiGuthrie:function(){try{var e=b(MSPluginManager[S[1]]()[S[0]]()+S[2]);return null!=e&&null!=e[S[4]]&&g(e[S[4]],!1)}catch(t){return!1}},Guthrie:g,valStatus:u,writeTextToFile:y,commands:{mergeduplicatesymbols:"mergeduplicatesymbols",mergeselectedsymbols:"mergeselectedsymbols",mergeselectedtextstyles:"mergeselectedtextstyles",mergesimilartextstyles:"mergesimilartextstyles",mergeduplicatetextstyles:"mergeduplicatetextstyles",mergesimilarlayerstyles:"mergesimilarlayerstyles",mergeselectedlayerstyles:"mergeselectedlayerstyles",mergeduplicatelayerstyles:"mergeduplicatelayerstyles",editsettings:"editsettings"},getDuplicateSymbols:function(e,t,n,r){var i=[],o={},a=[];if(t.forEach((function(t){var n=r?"mergingselected":I(t),l=function(e,t){for(var n=0;n<e.document.documentData().foreignSymbols().length;n++)if(e.document.documentData().foreignSymbols()[n].symbolMaster()==t)return!0;return!1}(e,t),s=l?V(t.foreignObject().libraryID()):null,c=d;l&&(c=h,c+=null!=s?s.name():"This library is not available");var u={name:""+t.name(),symbol:t,isForeign:l,thumbnail:"",symbolInstances:null,numInstances:0,symbolOverrides:null,numOverrides:0,libraryName:c,duplicates:[],isSelected:!1};if(u.duplicates.push({name:""+t.name(),symbol:t,isForeign:l,thumbnail:"",symbolInstances:null,numInstances:0,symbolOverrides:null,numOverrides:0,libraryName:c,duplicates:null,isSelected:!1}),l)a.push(""+t.foreignObject().remoteShareID());else try{a.push(""+t.symbolID())}catch(f){G("Trying to merge a component that is not a symbol."),G(t)}null==o[n]?(i.push(u),o[n]=u):o[n].duplicates.push(u)})),n){var l=NSApp.delegate().librariesController().libraries();l.forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&t.document().allSymbols().length})),l.forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&t.document().allSymbols().forEach((function(e){var n=I(e);a.indexOf(""+e.symbolID())>=0||null==o[n]||(o[n].duplicates.push({name:""+e.name(),symbol:e,isForeign:!0,libraryName:h+t.name(),duplicates:[],externalLibrary:t,isSelected:!1}))}))}))}return Object.keys(o).forEach((function(e){if(o[e].duplicates.length<=1){var t=i.indexOf(o[e]);t>-1&&i.splice(t,1),o[e]=null}})),i.sort(E)},importForeignSymbol:function(e,t){var n=MSShareableObjectReference.referenceForShareableObject_inLibrary(e,t);return AppController.sharedInstance().librariesController().importShareableObjectReference_intoDocument(n,data)},GetSpecificSymbolData:function(e,t,n){var r=0,i=0;G("Processing symbol metadata for: "+t[n].name);for(var o=0;o<t[n].duplicates.length;o++){var a=P(e,t[n].duplicates[o].symbol),l=L(e,t[n].duplicates[o].symbol),s=300/t[n].duplicates[o].symbol.frame().height()*t[n].duplicates[o].symbol.frame().width();t[n].duplicates[o].thumbnail=H(t[n].duplicates[o].symbol,s,300),t[n].duplicates[o].symbolInstances=a,t[n].duplicates[o].numInstances=a.length,t[n].duplicates[o].symbolOverrides=l,t[n].duplicates[o].numOverrides=l.length,r+=a.length,i+=l.length}G("-- Found "+r+" instances, "+i+" overrides, and created "+t[n].duplicates.length+" thumbnails")},getDuplicateLayerStyles:function(e,t){var n=[],r={};return e.document.documentData().layerStyles().objects().forEach((function(e){var t={layerStyle:e,name:""+e.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:W(e),thumbnail:"",duplicates:[],isSelected:!1,contrastMode:v(A(e))};t.duplicates.push({layerStyle:e,name:""+e.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:W(e),thumbnail:"",duplicates:null,isSelected:!1,contrastMode:v(A(e))}),null==r[e.name()]?(n.push(t),r[e.name()]=t):r[e.name()].duplicates.push(t)})),e.document.documentData().foreignLayerStyles().forEach((function(e){var t=x(n,e),i=V(e.libraryID());if(-1==t){var o={originalStyle:e,layerStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=i?i.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:W(e.localObject()),thumbnail:"",contrastMode:v(A(e.localObject())),duplicates:[],isSelected:!1};o.duplicates.push({originalStyle:e,layerStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=i?i.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isTakenOver:!1,isSelected:!1,isChosen:!1,description:W(e.localObject()),thumbnail:"",contrastMode:v(A(e.localObject())),duplicates:null,isSelected:!1}),null==r[e.localObject().name()]?(n.push(o),r[e.localObject().name()]=o):r[e.localObject().name()].duplicates.push(o)}else"number"==typeof t?n[t].correlativeStyles.push(e):n[t[0]].duplicates[t[1]].correlativeStyles.push(e)})),t&&NSApp.delegate().librariesController().libraries().forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&t.document().layerStyles().objects().forEach((function(e){var i=M(n,e);null!=i&&-1!=i&&(0==i[1]?n.splice([i[0]],1):n[i[0]].duplicates.splice(i[1],1)),null!=r[e.name()]&&r[e.name()].duplicates.push({layerStyle:e,name:""+e.name(),libraryName:h+t.name(),foreign:!0,library:t,isSelected:!1,isChosen:!1,description:W(e),thumbnail:"",contrastMode:v(A(e)),duplicates:[],isSelected:!1})}))})),Object.keys(r).forEach((function(e){if(r[e].duplicates.length<=1){var t=n.indexOf(r[e]);t>-1&&n.splice(t,1),r[e]=null}})),n},GetSpecificLayerStyleData:function(e,t,n){G("Processing text style metadata for: "+t[n].name);for(var r=0;r<t[n].duplicates.length;r++)t[n].duplicates[r].thumbnail=B(t[n].duplicates[r].layerStyle)},getDuplicateTextStyles:function(e,t){var n=[],r={};return e.document.documentData().layerTextStyles().objects().forEach((function(e){var t=e.style().textStyle().attributes(),i={attributes:t,textStyle:e,name:""+e.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:T(t),thumbnail:"",contrastMode:v(j(e)),duplicates:[],isSelected:!1};i.duplicates.push({attributes:t,textStyle:e,name:""+e.name(),libraryName:d,foreign:!1,isSelected:!1,isChosen:!1,description:T(t),thumbnail:"",contrastMode:v(j(e)),duplicates:null,isSelected:!1}),null==r[e.name()]?(n.push(i),r[e.name()]=i):r[e.name()].duplicates.push(i)})),e.document.documentData().foreignTextStyles().forEach((function(e){var t=x(n,e),i=V(e.libraryID()),o=e.localObject().style().textStyle().attributes();if(-1==t){var a={originalStyle:e,attributes:o,textStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=i?i.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:T(o),thumbnail:"",contrastMode:v(j(e.localObject())),duplicates:[],isSelected:!1};a.duplicates.push({originalStyle:e,attributes:o,textStyle:e.localObject(),name:""+e.localObject().name(),libraryName:h+(null!=i?i.name():"This library is not available"),foreign:!0,localShareID:e.localShareID(),remoteShareID:e.remoteShareID(),correlativeStyles:[],isSelected:!1,isChosen:!1,description:T(o),thumbnail:"",contrastMode:v(j(e.localObject())),duplicates:null,isSelected:!1}),null==r[e.localObject().name()]?(n.push(a),r[e.localObject().name()]=a):r[e.localObject().name()].duplicates.push(a)}else"number"==typeof t?n[t].correlativeStyles.push(e):n[t[0]].duplicates[t[1]].correlativeStyles.push(e)})),t&&NSApp.delegate().librariesController().libraries().forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&t.document().layerTextStyles().objects().forEach((function(e){var i=M(n,e),o=e.style().textStyle().attributes();null!=i&&-1!=i&&(0==i[1]?n.splice([i[0]],1):n[i[0]].duplicates.splice(i[1],1)),null!=r[e.name()]&&r[e.name()].duplicates.push({textStyle:e,attributes:o,name:""+e.name(),libraryName:h+t.name(),foreign:!0,library:t,isSelected:!1,isChosen:!1,description:T(o),thumbnail:"",contrastMode:v(j(e)),duplicates:[],isSelected:!1})}))})),Object.keys(r).forEach((function(e){if(r[e].duplicates.length<=1){var t=n.indexOf(r[e]);t>-1&&n.splice(t,1),r[e]=null}})),n},GetSpecificTextStyleData:function(e,t,n){G("Processing text style metadata for: "+t[n].name);for(var r=0;r<t[n].duplicates.length;r++)t[n].duplicates[r].thumbnail=U(t[n].duplicates[r].textStyle)},shouldEnableContrastMode:v,countAllSymbols:function(e,t){var n=[0,0];return n[0]=e.document.documentData().allSymbols().length,t&&NSApp.delegate().librariesController().libraries().forEach((function(t){t&&t.libraryID()&&t.enabled()&&e.document.documentData()&&0!=e.document.documentData().objectID().toString().localeCompare(t.libraryID().toString())&&(n[1]+=t.document().allSymbols().length)})),n},sortArray:function(e,t){},EditSettings:EditSettings,writeTextToFile:y,readFromFile:p,LoadSettings:function(){try{null!=(i=p(MSPluginManager[K[1]]()[K[0]]()+K[2]))&&null!=i[K[3]]&&(s=i[K[3]]),null!=i&&null!=i[K[4]]&&(c=i[K[4]])}catch(e){return console[K[5]](e),null}},clog:G,getLogsEnabled:function(){return s},getSettings:function(){return i},getLibrariesEnabled:function(){return c}}},function(e,t){e.exports={JS_BRIDGE:"__skpm_sketchBridge",START_MOVING_WINDOW:"__skpm_startMovingWindow",EXECUTE_JAVASCRIPT:"__skpm_executeJS",EXECUTE_JAVASCRIPT_SUCCESS:"__skpm_executeJS_success_",EXECUTE_JAVASCRIPT_ERROR:"__skpm_executeJS_error_"}},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports=require("events")},function(e,t,n){(function(t){var r=n(4);e.exports=function(n,i){return function o(a,l,s){"function"==typeof l&&(s=l,l=!1);var c=coscript.createFiber();return n.navigationDelegate().state&&0==n.navigationDelegate().state.wasReady?new t((function(e,t){i.once("ready-to-show",(function(){o(a,l,s).then(e).catch(t),c.cleanup()}))})):new t((function(t,o){var l=Math.random();i.webContents.on(r.EXECUTE_JAVASCRIPT_SUCCESS+l,(function(e){try{s&&s(null,e),t(e)}catch(n){o(n)}c.cleanup()})),i.webContents.on(r.EXECUTE_JAVASCRIPT_ERROR+l,(function(e){try{s?(s(e),t()):o(e)}catch(n){o(n)}c.cleanup()})),n.evaluateJavaScript_completionHandler(e.exports.wrapScript(a,l),null)}))}},e.exports.wrapScript=function(e,t){return"window."+r.EXECUTE_JAVASCRIPT+"("+t+", "+JSON.stringify(e)+")"},e.exports.injectScript=function(e){var t="window."+r.EXECUTE_JAVASCRIPT+' = function(id, script) {  try {    var res = eval(script);    if (res && typeof res.then === "function" && typeof res.catch === "function") {      res.then(function (res2) {        window.postMessage("'+r.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res2);      })      .catch(function (err) {        window.postMessage("'+r.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);      })    } else {      window.postMessage("'+r.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res);    }  } catch (err) {    window.postMessage("'+r.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);  }}',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}}).call(this,n(12))},function(e,t,n){"use strict";n.r(t),n.d(t,"MergeDuplicateSymbols",(function(){return y})),n.d(t,"MergeSelectedSymbols",(function(){return p})),n.d(t,"MergeSelectedTextStyles",(function(){return b})),n.d(t,"MergeSimilarTextStyles",(function(){return v})),n.d(t,"MergeDuplicateTextStyles",(function(){return w})),n.d(t,"MergeSelectedLayerStyles",(function(){return x})),n.d(t,"MergeSimilarLayerStyles",(function(){return M})),n.d(t,"MergeDuplicateLayerStyles",(function(){return N})),n.d(t,"EditSettings",(function(){return D})),n.d(t,"triggerMethod",(function(){return _})),n.d(t,"showRegistration",(function(){return k})),n.d(t,"onShutdown",(function(){return O}));var r,i=n(0),o=n.n(i),a=n(2),l=(n(5),n(9)),s=n(29),c=n(33),u=n(37),d=n(3),h="merge-duplicates.webviewReg",f=0,m=!1,S=!1,g=!1;function y(e){r=d.commands.mergeduplicatesymbols,E(e)}function p(e){r=d.commands.mergeselectedsymbols,E(e)}function b(e){r=d.commands.mergeselectedtextstyles,E(e)}function v(e){r=d.commands.mergesimilartextstyles,E(e)}function w(e){r=d.commands.mergeduplicatetextstyles,E(e)}function x(e){r=d.commands.mergeselectedlayerstyles,E(e)}function M(e){r=d.commands.mergesimilarlayerstyles,E(e)}function N(e){r=d.commands.mergeduplicatelayerstyles,E(e)}function D(e){r=d.commands.editsettings,E(e)}var C=["app","valStatus","noCon","over","now","abs","floor"];function E(e){var t=d.ExiGuthrie();if(t==d[C[1]][C[0]]||t==d[C[1]][C[2]])_(e);else if(t==d[C[1]][C[3]])g=!0,k(e);else{var n=d.IsInTrial(),r=new Date(parseInt(n));if(null!=n){var i=r-Date[C[4]](),o=Math[C[6]](Math[C[5]](i/864e5));(f=7-o)>0?m=!0:S=!0,k(e)}else k(e)}}function _(e){switch(d.LoadSettings(),r){case d.commands.mergeduplicatesymbols:l.MergeDuplicateSymbols(e);break;case d.commands.mergeselectedsymbols:l.MergeSelectedSymbols(e);break;case d.commands.mergeduplicatetextstyles:c.MergeDuplicateTextStyles(e);break;case d.commands.mergeselectedtextstyles:c.MergeSelectedTextStyles(e);break;case d.commands.mergesimilartextstyles:c.MergeSimilarTextStyles(e);break;case d.commands.mergeduplicatelayerstyles:s.MergeDuplicateLayerStyles(e);break;case d.commands.mergeselectedlayerstyles:s.MergeSelectedLayerStyles(e);break;case d.commands.mergesimilarlayerstyles:s.MergeSimilarLayerStyles(e);break;case d.commands.editsettings:u.EditSettings(e)}}function k(e){var t={identifier:h,width:1200,height:700,show:!1,titleBarStyle:"hidden"},r=new o.a(t),i=r.webContents,a=["ready-to-show","error","catch","SetTrialMode(","stringify",")","executeJavaScript","SetExpiredMode()","SetOverMode()","show","once","did-finish-load","on","RegisterKey","app","valStatus","","path","mainPluginsFolderURL","/merge.json","writeTextToFile","ShowRegistrationComplete()","over","SetOverModeInReg()","ShowRegistrationFail()","StartTrial","now","ShowTrialStarted()","ContinueTrial","LetsStartTrial","LetsStart"];r[a[10]](a[0],(function(){m&&i[a[6]]("".concat(a[3]).concat(JSON[a[4]](f)).concat(a[5]))[a[2]](console[a[1]]),S&&i[a[6]]("".concat(a[7]))[a[2]](console[a[1]]),g&&i[a[6]]("".concat(a[8]))[a[2]](console[a[1]]),r[a[9]]()})),i[a[12]](a[11],(function(){m&&i[a[6]]("".concat(a[3]).concat(JSON[a[4]](f)).concat(a[5]))[a[2]](console[a[1]]),S&&i[a[6]]("".concat(a[7]))[a[2]](console[a[1]]),g&&i[a[6]]("".concat(a[8]))[a[2]](console[a[1]])})),i[a[12]](a[13],(function(e){var t=d.Guthrie(e,!0);if(t==d[a[15]][a[14]]){var n={licenseKey:a[16]+e};d[a[20]](n,MSPluginManager[a[18]]()[a[17]]()+a[19]),i[a[6]]("".concat(a[21]))[a[2]](console[a[1]])}else t==d[a[15]][a[22]]?(i[a[6]]("".concat(a[8]))[a[2]](console[a[1]]),i[a[6]]("".concat(a[23]))[a[2]](console[a[1]])):i[a[6]]("".concat(a[24]))[a[2]](console[a[1]])})),i[a[12]](a[25],(function(e){var t={startTime:a[16]+Date[a[26]]()};d[a[20]](t,MSPluginManager[a[18]]()[a[17]]()+a[19]),i[a[6]]("".concat(a[27]))[a[2]](console[a[1]])})),i[a[12]](a[28],(function(){O(h),_(e)})),i[a[12]](a[29],(function(){m=!0,f=7,O(h),_(e)})),i[a[12]](a[30],(function(){m=!1,O(h),_(e)})),i.on("nativeLog",(function(e){d.cog(e)})),i.on("OpenPluginWeb",(function(e){NSWorkspace.sharedWorkspace().openURL(NSURL.URLWithString("http://www.mergeduplicates.com"))})),i.on("Cancel",(function(){O(h)})),r.loadURL(n(39))}function O(e){var t=Object(a.getWebview)(e);t&&t.close()}},function(e,t,n){"use strict";n.r(t),n.d(t,"MergeSelectedSymbols",(function(){return u})),n.d(t,"MergeDuplicateSymbols",(function(){return d})),n.d(t,"onShutdown",(function(){return h}));var r=n(0),i=n.n(r),o=n(2),a=n(3),l="merge-duplicates.webview",s="merge-selected-symbols.webview";function c(e,t){var n,r=[],i=0,o=0,a=0;if(null==e.duplicates[t].externalLibrary)n=e.duplicates[t].symbol;else{var l=MSShareableObjectReference.referenceForShareableObject_inLibrary(e.duplicates[t].symbol,e.duplicates[t].externalLibrary),s=AppController.sharedInstance().librariesController().importShareableObjectReference_intoDocument(l,context.document.documentData());n=s.symbolMaster()}for(var c=0;c<e.duplicates.length;c++)c!=t&&r.indexOf(e.duplicates[c].symbol.symbolID())<0&&r.push(e.duplicates[c].symbol.symbolID());for(c=0;c<e.duplicates.length;c++)if(c!=t){e.duplicates[c].isForeign||a++;var u=e.duplicates[c].symbolInstances,d=e.duplicates[c].symbolOverrides,h=!1;if(e.duplicates[c].isForeign&&null==e.duplicates[c].externalLibrary&&(e.duplicates[c].symbol.foreignObject().unlinkFromRemote(),h=!0),null==e.duplicates[t].externalLibrary)for(var f=0;f<u.length;f++)u[f].changeInstanceToSymbol(n),i++;else for(f=0;f<u.length;f++)u[f].changeInstanceToSymbol(s.symbolMaster()),i++;for(f=0;f<d.length;f++){for(var m=[],S=NSMutableDictionary.dictionaryWithDictionary(d[f].overrides()),g=S.allKeys(),y=0;y<g.count();y++){var p=g.objectAtIndex(y),b=S[p].toString().replace(/[^\x20-\x7E]+/g,"");if(null!=S[p]&&/\S/.test(b)){if(null!=S[p].allKeys)for(var v=S[p].allKeys(),w=0;w<v.count();w++){v.objectAtIndex(w);for(var x=!1,M=0;M<r.length;M++)null!=S[p].symbolID&&S[p].symbolID.indexOf(r[M])>-1&&(x=!0);x&&m.indexOf(p)<0&&m.push(p)}}else;}d[f].overridePoints().forEach((function(e){if(e.toString().indexOf("symbolID")>-1){var t=!1;for(M=0;M<m.length;M++)e.toString().indexOf(m[M])>-1&&(t=!0);t&&(d[f].setValue_forOverridePoint_(n.symbolID(),e),o++)}}))}e.duplicates[c].isForeign?(h&&e.duplicates[c].symbol.removeFromParent(),context.document.documentData().foreignSymbols().removeObject(e.duplicates[c].symbol)):e.duplicates[c].symbol.removeFromParent()}return[a,i,o]}function u(e){a.clog("----- Merge selected symbols -----");var t={identifier:s,width:900,height:700,remembersWindowFrame:!0,show:!1,titleBarStyle:"hidden"},r=new i.a(t),o=r.webContents,l=[],u=e.selection;if(u.count()<2)e.document.showMessage("Wop! Select at least two symbols and run the plugin again :)"),h(s);else{for(var d=!0,f=0;f<u.count();f++)"MSSymbolMaster"!=u[f].class()&&(d=!1);d?(a.clog("Loading webview"),r.loadURL(n(27))):e.document.showMessage("Only symbols can be merged")}r.once("ready-to-show",(function(){r.show()})),o.on("did-finish-load",(function(){a.clog("Webview loaded"),o.executeJavaScript("LaunchMerge(".concat(JSON.stringify(u.count()),")")).catch(console.error)})),o.on("GetSymbolData",(function(){l=[],l=a.getDuplicateSymbols(e,u,!1,!0);for(var t=0;t<l.length;t++)a.GetSpecificSymbolData(e,l,t);o.executeJavaScript("DrawSymbolList(".concat(JSON.stringify(l),")")).catch(console.error)})),o.on("nativeLog",(function(e){a.clog(e)})),o.on("Cancel",(function(){h(s)})),o.on("ExecuteMerge",(function(t,n){a.clog("Execute merge. Selected symbol: "+l[0].duplicates[n].name);var r,i="";i=(r=c(l[0],n))[1]>0&&r[2]?", replaced "+r[1]+" instances, and updated "+r[2]+" overrides.":r[1]>0?" and replaced "+r[1]+" instances.":r[2]>0?" and updated "+r[2]+" overrides.":".",a.clog("Completed merge. Removed "+r[0]+" symbols"+i),e.document.showMessage("Hey ho! You just removed "+r[0]+" symbols"+i+" Amazing!"),h(s)}))}function d(e){a.clog("----- Merge duplicate symbols (with the same name) -----");var t,r={identifier:l,width:1200,height:700,remembersWindowFrame:!0,show:!1,titleBarStyle:"hidden"},o=new i.a(r),s=o.webContents,u=[],d=a.countAllSymbols(e,a.getLibrariesEnabled());function f(n){if(a.clog("Processing duplicates. Include libraries: "+n),t=a.getDuplicateSymbols(e,e.document.documentData().allSymbols(),n,!1),a.clog("-- Found "+t.length+" duplicates"),t.length>0){a.GetSpecificSymbolData(e,t,0),u=[];for(var r=0;r<t.length;r++)u.push({symbolWithDuplicates:t[r],selectedIndex:-1,isUnchecked:!1,isProcessed:0==r})}a.clog("End of processing duplicates")}a.clog("Local symbols: "+d[0]+". Library symbols:"+d[1]+". Libraries enabled:"+a.getLibrariesEnabled()),o.loadURL(n(28)),a.clog("Webview called"),o.once("ready-to-show",(function(){o.show()})),s.on("did-finish-load",(function(){a.clog("Webview loaded"),s.executeJavaScript("LaunchMerge(".concat(JSON.stringify(d[0]),",").concat(JSON.stringify(d[1]),",").concat(a.getLibrariesEnabled(),")")).catch(console.error)})),s.on("nativeLog",(function(e){a.clog(e)})),s.on("Cancel",(function(){h(l)})),s.on("GetSelectedSymbolData",(function(n){a.GetSpecificSymbolData(e,t,n),s.executeJavaScript("ReDrawAfterGettingData(".concat(JSON.stringify(t[n]),",").concat(n,")")).catch(console.error)})),s.on("RecalculateDuplicates",(function(e){f(null!=e?e:a.getLibrariesEnabled()),a.clog("Drawing duplicates to webview"),s.executeJavaScript("DrawDuplicateSymbols(".concat(JSON.stringify(u),")")).catch(console.error)})),s.on("ExecuteMerge",(function(t){var n=0,r=[0,0,0];a.clog("Executing Merge");for(var i=0;i<t.length;i++)if(a.clog("-- Merging "+u[i].symbolWithDuplicates.name),!t[i].isUnchecked&&t[i].selectedIndex>=0){u[i].selectedIndex=t[i].selectedIndex;for(var o=0;o<u[i].symbolWithDuplicates.duplicates.length;o++)0;var s=c(u[i].symbolWithDuplicates,u[i].selectedIndex);r[0]+=s[0],r[1]+=s[1],r[2]+=s[2],n++}h(l);var d="";d=r[1]>0&&r[2]?", replaced "+r[1]+" instances, and updated "+r[2]+" overrides.":r[1]>0?" and replaced "+r[1]+" instances.":r[2]>0?" and updated "+r[2]+" overrides.":".",n>0?(a.clog("Completed merge. Removed "+r[0]+" symbols"+d),e.document.showMessage("Hey ho! You just removed "+r[0]+" symbols"+d+" Amazing!")):(a.clog("Completed merge. No symbols were merged."),e.document.showMessage("No symbols were merged."))}))}function h(e){var t=Object(o.getWebview)(e);t&&t.close()}},function(e,t){e.exports=function(e,t,n){function r(n){e.isVisible()&&(n?(NSApplication.sharedApplication().activateIgnoringOtherApps(!0),t.makeKeyAndOrderFront(null)):(t.orderBack(null),NSApp.mainWindow().makeKeyAndOrderFront(null)))}e._panel=t,e._webview=n,e._destroyed=!1,e.destroy=function(){return t.close()},e.close=function(){if(t.delegate().utils&&t.delegate().utils.parentWindow){var n=!0;return e.emit("close",{get defaultPrevented(){return!n},preventDefault:function(){n=!1}}),void(n&&t.delegate().utils.parentWindow.endSheet(t))}e.isClosable()&&t.performClose(null)},e.focus=r.bind(this,!0),e.blur=r.bind(this,!1),e.isFocused=function(){return t.isKeyWindow()},e.isDestroyed=function(){return e._destroyed},e.show=function(){return NSApp.activateIgnoringOtherApps(!0),t.delegate().utils&&t.delegate().utils.parentWindow?t.delegate().utils.parentWindow.beginSheet_completionHandler(t,__mocha__.createBlock_function("v16@?0q8",(function(){e.emit("closed")}))):t.makeKeyAndOrderFront(null)},e.showInactive=function(){return t.orderFrontRegardless()},e.hide=function(){return t.orderOut(null)},e.isVisible=function(){return t.isVisible()},e.isModal=function(){return!1},e.maximize=function(){e.isMaximized()||t.zoom(null)},e.unmaximize=function(){e.isMaximized()&&t.zoom(null)},e.isMaximized=function(){if(0!=(t.styleMask()&NSResizableWindowMask))return t.isZoomed();var e=NSScreen.mainScreen().visibleFrame(),n=t.frame();return e.origin.x==n.origin.x&&e.origin.y==n.origin.y&&e.size.width==n.size.width&&e.size.height==n.size.height},e.minimize=function(){return t.miniaturize(null)},e.restore=function(){return t.deminiaturize(null)},e.isMinimized=function(){return t.isMiniaturized()},e.setFullScreen=function(n){n!==e.isFullscreen()&&t.toggleFullScreen(null)},e.isFullscreen=function(){return t.styleMask()&NSFullScreenWindowMask},e.setAspectRatio=function(e){e>0?t.setAspectRatio(NSMakeSize(e,1)):t.setResizeIncrements(NSMakeSize(1,1))},e.setBounds=function(n,r){if(!n)return;if(e.isFullscreen())return;const i=Object.assign(e.getBounds(),n);var o=NSMakeRect(i.x,0,i.width,i.height),a=NSScreen.screens().firstObject();o.origin.y=NSHeight(a.frame())-i.y,t.setFrame_display_animate(o,!0,r)},e.getBounds=function(){const e=t.frame();var n=NSScreen.screens().firstObject().frame();return{x:e.origin.x,y:Math.round(NSHeight(n)-e.origin.y),width:e.size.width,height:e.size.height}},e.setContentBounds=function(t,n){e.setBounds(t,n)},e.getContentBounds=function(){return e.getBounds()},e.setSize=function(t,n,r){return e.setBounds({width:t,height:n},r)},e.getSize=function(){var t=e.getBounds();return[t.width,t.height]},e.setContentSize=function(t,n,r){return e.setContentBounds({width:t,height:n},r)},e.getContentSize=function(){var t=e.getContentBounds();return[t.width,t.height]},e.setMinimumSize=function(e,n){const r=CGSizeMake(e,n);t.setContentMinSize(r)},e.getMinimumSize=function(){const e=t.contentMinSize();return[e.width,e.height]},e.setMaximumSize=function(e,n){const r=CGSizeMake(e,n);t.setContentMaxSize(r)},e.getMaximumSize=function(){const e=t.contentMaxSize();return[e.width,e.height]},e.setResizable=function(t){return e._setStyleMask(t,NSResizableWindowMask)},e.isResizable=function(){return t.styleMask()&NSResizableWindowMask},e.setMovable=function(e){return t.setMovable(e)},e.isMovable=function(){return t.isMovable()},e.setMinimizable=function(t){return e._setStyleMask(t,NSMiniaturizableWindowMask)},e.isMinimizable=function(){return t.styleMask()&NSMiniaturizableWindowMask},e.setMaximizable=function(e){t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).setEnabled(e)},e.isMaximizable=function(){return t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).isEnabled()},e.setFullScreenable=function(t){e._setCollectionBehavior(t,NSWindowCollectionBehaviorFullScreenPrimary),e._setCollectionBehavior(!t,NSWindowCollectionBehaviorFullScreenAuxiliary)},e.isFullScreenable=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorFullScreenPrimary},e.setClosable=function(t){e._setStyleMask(t,NSClosableWindowMask)},e.isClosable=function(){return t.styleMask()&NSClosableWindowMask},e.setAlwaysOnTop=function(e,n,r){var i=NSNormalWindowLevel,o=CGWindowLevelForKey(kCGMaximumWindowLevelKey),a=CGWindowLevelForKey(kCGMinimumWindowLevelKey);e&&(i="normal"===n?NSNormalWindowLevel:"torn-off-menu"===n?NSTornOffMenuWindowLevel:"modal-panel"===n?NSModalPanelWindowLevel:"main-menu"===n?NSMainMenuWindowLevel:"status"===n?NSStatusWindowLevel:"pop-up-menu"===n?NSPopUpMenuWindowLevel:"screen-saver"===n?NSScreenSaverWindowLevel:"dock"===n?NSDockWindowLevel:NSFloatingWindowLevel);var l=i+(r||0);if(!(l>=a&&l<=o))throw new Error("relativeLevel must be between "+a+" and "+o);t.setLevel(l)},e.isAlwaysOnTop=function(){return t.level()!==NSNormalWindowLevel},e.moveTop=function(){return t.orderFrontRegardless()},e.center=function(){t.center()},e.setPosition=function(t,n,r){return e.setBounds({x:t,y:n},r)},e.getPosition=function(){var t=e.getBounds();return[t.x,t.y]},e.setTitle=function(e){t.setTitle(e)},e.getTitle=function(){return String(t.title())};var i=0;e.flashFrame=function(e){e?i=NSApp.requestUserAttention(NSInformationalRequest):(NSApp.cancelUserAttentionRequest(i),i=0)},e.getNativeWindowHandle=function(){return t},e.getNativeWebViewHandle=function(){return n},e.loadURL=function(e){if(/^(?!https?|file).*\.html?$/.test(e)&&"undefined"!=typeof __command&&__command.pluginBundle()&&(e="file://"+__command.pluginBundle().urlForResourceNamed(e).path()),/^file:\/\/.*\.html?$/.test(e))return e=(e=NSString.alloc().initWithString(e)).stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()),void n.loadFileURL_allowingReadAccessToURL(NSURL.URLWithString(e),NSURL.URLWithString("file:///"));const t=NSURL.URLWithString(e),r=NSURLRequest.requestWithURL(t);n.loadRequest(r)},e.reload=function(){n.reload()},e.setHasShadow=function(e){return t.setHasShadow(e)},e.hasShadow=function(){return t.hasShadow()},e.setOpacity=function(e){return t.setAlphaValue(e)},e.getOpacity=function(){return t.alphaValue()},e.setVisibleOnAllWorkspaces=function(t){return e._setCollectionBehavior(t,NSWindowCollectionBehaviorCanJoinAllSpaces)},e.isVisibleOnAllWorkspaces=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorCanJoinAllSpaces},e.setIgnoreMouseEvents=function(e){return t.setIgnoresMouseEvents(e)},e.setContentProtection=function(e){t.setSharingType(e?NSWindowSharingNone:NSWindowSharingReadOnly)},e.setAutoHideCursor=function(e){t.setDisableAutoHideCursor(e)},e.setVibrancy=function(n){var r=e._vibrantView;if(!n){if(null==r)return;return r.removeFromSuperview(),void t.setVibrantView(null)}if(null==r){var i=t.contentView();r=NSVisualEffectView.alloc().initWithFrame(i.bounds()),e._vibrantView=r,r.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),r.setBlendingMode(NSVisualEffectBlendingModeBehindWindow),r.setState(NSVisualEffectStateActive),r.setFrame(i.bounds()),i.addSubview_positioned_relativeTo(r,NSWindowBelow,null)}var o=NSVisualEffectMaterialLight;"appearance-based"===n?o=NSVisualEffectMaterialAppearanceBased:"light"===n?o=NSVisualEffectMaterialLight:"dark"===n?o=NSVisualEffectMaterialDark:"titlebar"===n?o=NSVisualEffectMaterialTitlebar:"selection"===n?o=NSVisualEffectMaterialSelection:"menu"===n?o=NSVisualEffectMaterialMenu:"popover"===n?o=NSVisualEffectMaterialPopover:"sidebar"===n?o=NSVisualEffectMaterialSidebar:"medium-light"===n?o=NSVisualEffectMaterialMediumLight:"ultra-dark"===n&&(o=NSVisualEffectMaterialUltraDark),r.setMaterial(o)},e._setBackgroundColor=function(e){var r=function(e){if(!e||"#"!==e[0]){if(e&&"function"==typeof e.isKindOfClass&&e.isKindOfClass(NSColor))return e;throw new Error("Incorrect color formating. It should be an hex color: #RRGGBBAA")}var t,n=e.substr(1);if(3===n.length?n+="F":6===n.length&&(n+="FF"),4===n.length)for(var r=0;r<4;r+=1)t+=n[r],t+=n[r];else{if(8!==n.length)return NSColor.whiteColor();t=n}var i=parseInt(t.slice(0,2),16),o=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16),l=parseInt(t.slice(6,8),16);return NSColor.colorWithSRGBRed_green_blue_alpha(i,o,a,l)}(e);n.setValue_forKey(!1,"drawsBackground"),t.backgroundColor=r},e._invalidate=function(){t.flushWindow(),t.contentView().setNeedsDisplay(!0)},e._setStyleMask=function(n,r){var i=e.isMaximizable();n?t.setStyleMask(t.styleMask()|r):t.setStyleMask(t.styleMask()&~r),e.setMaximizable(i)},e._setCollectionBehavior=function(n,r){var i=e.isMaximizable();n?t.setCollectionBehavior(t.collectionBehavior()|r):t.setCollectionBehavior(t.collectionBehavior()&~r),e.setMaximizable(i)},e._showWindowButton=function(e){var n=t.standardWindowButton(e);n.superview().addSubview_positioned_relative(n,NSWindowAbove,null)}}},function(e,t,n){var r=n(6),i=n(7);e.exports=function(e,t,n){var o=new r;o.loadURL=e.loadURL,o.loadFile=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.downloadURL=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.getURL=function(){return String(n.url())},o.getTitle=function(){return String(n.title())},o.isDestroyed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.focus=e.focus,o.isFocused=e.isFocused,o.isLoading=function(){return!!n.loading()},o.isLoadingMainFrame=function(){return!!n.loading()},o.isWaitingForResponse=function(){return!n.loading()},o.stop=function(){n.stopLoading()},o.reload=function(){n.reload()},o.reloadIgnoringCache=function(){n.reloadFromOrigin()},o.canGoBack=function(){return!!n.canGoBack()},o.canGoForward=function(){return!!n.canGoForward()},o.canGoToOffset=function(e){return!!n.backForwardList().itemAtIndex(e)},o.clearHistory=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.goBack=function(){n.goBack()},o.goForward=function(){n.goForward()},o.goToIndex=function(e){var t=n.backForwardList(),r=t.backList(),i=r.count();if(i>e)n.loadRequest(NSURLRequest.requestWithURL(r[e]));else{var o=t.forwardList();if(!(o.count()>e-i))throw new Error("Cannot go to index "+e);n.loadRequest(NSURLRequest.requestWithURL(o[e-i]))}},o.goToOffset=function(e){if(!o.canGoToOffset(e))throw new Error("Cannot go to offset "+e);n.loadRequest(NSURLRequest.requestWithURL(n.backForwardList().itemAtIndex(e)))},o.isCrashed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setUserAgent=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.getUserAgent=function(){const e=n.customUserAgent();return e?String(e):void 0},o.insertCSS=function(e){var t="var style = document.createElement('style'); style.innerHTML = "+e.replace(/"/,'\\"')+"; document.head.appendChild(style);",r=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);n.configuration().userContentController().addUserScript(r)},o.insertJS=function(e){var t=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(e,0,!0);n.configuration().userContentController().addUserScript(t)},o.executeJavaScript=i(n,e),o.setIgnoreMenuShortcuts=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.isAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setZoomFactor=function(e){n.setMagnification_centeredAtPoint(e,CGPointMake(0,0))},o.getZoomFactor=function(e){e(Number(n.magnification()))},o.setZoomLevel=function(e){o.setZoomFactor(Math.pow(1.2,e))},o.getZoomLevel=function(e){e(Math.log(Number(n.magnification()))/Math.log(1.2))},o.setVisualZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.setLayoutZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},o.send=function(){const e="window.postMessage({isSketchMessage: true,origin: '"+String(__command.identifier())+"',args: "+JSON.stringify([].slice.call(arguments))+'}, "*")';n.evaluateJavaScript_completionHandler(e,null)},o.getNativeWebview=function(){return n},e.webContents=o}},function(e,t){function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(i){return void a(t.promise,i)}o(t.promise,r)}else(1===e._state?o:a)(t.promise,e._value)}))):e._deferreds.push(t)}function o(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void c(n.bind(t),e)}e._state=1,e._value=t,l(e)}catch(i){a(e,i)}}function a(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&r._immediateFn((function(){e._handled||r._unhandledRejectionFn(e._value,e)}));for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e((function(e){n?r._multipleResolvesFn("resolve",t,e):(n=!0,o(t,e))}),(function(e){n?r._multipleResolvesFn("reject",t,e):(n=!0,a(t,e))}))}catch(i){if(n)return void r._multipleResolvesFn("reject",t,i);n=!0,a(t,i)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var r=new this.constructor(n);return i(this,new s(e,t,r)),r},r.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},r.all=function(e){return new r((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var l=a.then;if("function"==typeof l)return void l.call(a,(function(t){o(e,t)}),n)}r[e]=a,0==--i&&t(r)}catch(s){n(s)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)r.resolve(e[i]).then(t,n)}))},r._immediateFn=setImmediate,r._unhandledRejectionFn=function(e,t){"undefined"!=typeof process&&process.listenerCount&&(process.listenerCount("unhandledRejection")||process.listenerCount("uncaughtException"))?(process.emit("unhandledRejection",e,t),process.emit("uncaughtException",e,"unhandledRejection")):"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._multipleResolvesFn=function(e,t,n){"undefined"!=typeof process&&process.emit&&process.emit("multipleResolves",e,t,n)},e.exports=r},function(e,t){function n(e,t,n,r){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(t,e,NSLayoutRelationEqual,n,e,1,r))}e.exports=function(e,t,r){r=r||[],e.setTranslatesAutoresizingMaskIntoConstraints(!1),n(NSLayoutAttributeLeft,e,t,r[0]||0),n(NSLayoutAttributeTop,e,t,r[1]||0),n(NSLayoutAttributeRight,e,t,r[2]||0),n(NSLayoutAttributeBottom,e,t,r[3]||0)}},function(e,t){e.exports=function(e,t){var n=e.convertPoint_fromView(t.locationInWindow(),null);return"var el = document.elementFromPoint("+n.x+", "+n.y+'); if (el && ["text", "textarea", "date", "datetime-local", "email", "number", "month", "password", "search", "tel", "time", "url", "week" ].indexOf(el.type) >= 0 && el.focus) {el.focus();} else if (el) {el.dispatchEvent(new Event("click", {bubbles: true}))}'}},function(e,t,n){var r=n(4);e.exports=function(e){var t="window.originalPostMessage = window.postMessage;window.postMessage = function(actionName) {if (!actionName) {throw new Error('missing action name')}window.webkit.messageHandlers."+r.JS_BRIDGE+".postMessage(JSON.stringify([].slice.call(arguments)));}",n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}},function(e,t,n){var r=n(4);e.exports.injectScript=function(e){var t='(function () {document.addEventListener(\'mousedown\', onMouseDown);function shouldDrag(target) {  if (!target || (target.dataset || {}).appRegion === "no-drag") { return false }  if ((target.dataset || {}).appRegion === "drag") { return true }  return shouldDrag(target.parentElement)};function onMouseDown(e) {console.log(e);  if (e.button !== 0 || !shouldDrag(e.target)) { return }  window.postMessage("'+r.START_MOVING_WINDOW+'");};})()',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)},e.exports.setupHandler=function(e){var t=null,n=null,i=null;function o(){if(!n||1!==NSEvent.pressedMouseButtons())return clearInterval(i),t=null,void(n=null);var r=NSEvent.mouseLocation();e.setPosition(n.x+(r.x-t.x),n.y+(t.y-r.y),!1)}e.webContents.on(r.START_MOVING_WINDOW,(function(){t=NSEvent.mouseLocation();var r=e.getPosition();n={x:r[0],y:r[1]},i=setInterval(o,1e3/60)}))}},function(e,t,n){var r,i,o,a=n(18),l=n(19),s=n(4);e.exports=function(e,t,n,c){r||(r=new a({utils:null,panel:null,"windowDidResize:":function(){this.utils.emit("resize")},"windowDidMiniaturize:":function(){this.utils.emit("minimize")},"windowDidDeminiaturize:":function(){this.utils.emit("restore")},"windowDidEnterFullScreen:":function(){this.utils.emit("enter-full-screen")},"windowDidExitFullScreen:":function(){this.utils.emit("leave-full-screen")},"windowDidMove:":function(){this.utils.emit("move"),this.utils.emit("moved")},"windowShouldClose:":function(){var e=1;return this.utils.emit("close",{get defaultPrevented(){return!e},preventDefault:function(){e=0}}),e},"windowWillClose:":function(){this.utils.emit("closed")},"windowDidBecomeKey:":function(){this.utils.emit("focus",this.panel.currentEvent())},"windowDidResignKey:":function(){this.utils.emit("blur")}})),i||(i=new a({state:{wasReady:0},utils:null,"webView:didCommitNavigation:":function(e){this.utils.emit("will-navigate",{},String(String(e.URL())))},"webView:didStartProvisionalNavigation:":function(){this.utils.emit("did-start-navigation"),this.utils.emit("did-start-loading")},"webView:didReceiveServerRedirectForProvisionalNavigation:":function(){this.utils.emit("did-get-redirect-request")},"webView:didFailProvisionalNavigation:withError:":function(e,t,n){this.utils.emit("did-fail-load",n)},"webView:didFinishNavigation:":function(){0==this.state.wasReady&&(this.state.wasReady=1,this.utils.emitBrowserEvent("ready-to-show")),this.utils.emit("did-navigate"),this.utils.emit("did-frame-navigate"),this.utils.emit("did-stop-loading"),this.utils.emit("did-finish-load"),this.utils.emit("did-frame-finish-load")},"webViewWebContentProcessDidTerminate:":function(){this.utils.emit("dom-ready")}})),o||(o=new a({utils:null,"userContentController:didReceiveScriptMessage:":function(e,t){var n=this.utils.parseWebArguments(String(t.body()));n&&n[0]&&"string"==typeof n[0]&&(n[0]=String(n[0]),this.utils.emit.apply(this,n))}}));var u=i.new({utils:{setTitle:e.setTitle.bind(e),emitBrowserEvent(){try{e.emit.apply(e,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}},emit(){try{e.webContents.emit.apply(e.webContents,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}}},state:{wasReady:0}});n.setNavigationDelegate(u);var d=o.new({utils:{emit(){try{e.webContents.emit.apply(e.webContents,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}},parseWebArguments:l}});n.configuration().userContentController().addScriptMessageHandler_name(d,s.JS_BRIDGE);var h,f={emit(){try{e.emit.apply(e,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}}};c.modal&&((h="Document"===c.parent.type?c.parent.sketchObject:c.parent)&&"MSDocumentData"===String(h.class())&&(h=h.delegate()),f.parentWindow=h.windowForSheet());var m=r.new({utils:f,panel:t});t.setDelegate(m)}},function(module,exports){module.exports=function MochaDelegate(definition,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject),handlers={},ivars={};function setHandlerForSelector(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function(selector,dynamicFunction)}}function setIvar(e,t){var n=e in handlers;if(ivars[e]=t,!n){delegateClassDesc.addInstanceVariableWithName_typeEncoding(e,"@");var r=MOPropertyDescription.new();r.name=e,r.typeEncoding="@",r.weak=!0,r.ivarName=e,delegateClassDesc.addProperty(r)}}this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(e){var t=NSClassFromString(uniqueClassName).new();return Object.keys(ivars).forEach((function(e){t[e]=ivars[e]})),Object.keys(e||{}).forEach((function(n){t[n]=e[n]})),t},this.new=this.getClassInstance,"object"==typeof definition&&Object.keys(definition).forEach((function(e){"function"==typeof definition[e]?setHandlerForSelector(e,definition[e]):setIvar(e,definition[e])})),delegateClassDesc.registerClass()}},function(e,t){e.exports=function(e){var t=null;try{t=JSON.parse(e)}catch(n){}return t&&t.constructor&&t.constructor===Array&&0!=t.length?t:null}},function(e,t,n){"use strict";var r=n(21),i=n(22),o=n(23);function a(){}a.prototype.getDeltaE76=function(e,t){return new r(e,t).getDeltaE()},a.prototype.getDeltaE94=function(e,t){return new i(e,t).getDeltaE()},a.prototype.getDeltaE00=function(e,t){return new o(e,t).getDeltaE()},e.exports=new a},function(e,t,n){"use strict";function r(e,t){this.x1=e,this.x2=t}r.prototype.getDeltaE=function(){var e=this.x1,t=this.x2;return Math.sqrt(Math.pow(t.L-e.L,2)+Math.pow(t.A-e.A,2)+Math.pow(t.B-e.B,2))},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){this.x1=e,this.x2=t,this.weights=n||{},this.weights.lightness=this.weights.lightness||1,this.weights.chroma=this.weights.chroma||1,this.weights.hue=this.weights.hue||1,1===this.weights.lightness?(this.weights.K1=.045,this.weights.K2=.015):(this.weights.K1=.048,this.weights.K2=.014)}r.prototype.getDeltaE=function(){var e=this.x1,t=this.x2,n=Math.sqrt,r=Math.pow;return n(r(this.calculateL(e,t),2)+r(this.calculateA(e,t),2)+r(this.calculateB(e,t),2))},r.prototype.calculateL=function(e,t){return(e.L-t.L)/this.weights.lightness},r.prototype.calculateA=function(e,t){var n=Math.sqrt,r=Math.pow,i=n(r(e.A,2)+r(e.B,2)),o=i-n(r(t.A,2)+r(t.B,2)),a=1+this.weights.K1*i;return o/(this.weights.chroma*a)},r.prototype.calculateB=function(e,t){var n=Math.sqrt,r=Math.pow,i=(s=n(r(e.A,2)+r(e.B,2)))-n(r(t.A,2)+r(t.B,2)),o=e.A-t.A,a=e.B-t.B,l=n(r(o,2)+r(a,2)-r(i,2)),s=n(r(e.A,2)+r(e.B,2));return l/(1+this.weights.K2*s)},e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=Math.sqrt,i=Math.pow;this.x1=e,this.x2=t,this.weights=n||{},this.ksubL=this.weights.lightness||1,this.ksubC=this.weights.chroma||1,this.ksubH=this.weights.hue||1,this.deltaLPrime=t.L-e.L,this.LBar=(e.L+t.L)/2,this.C1=r(i(e.A,2)+i(e.B,2)),this.C2=r(i(t.A,2)+i(t.B,2)),this.CBar=(this.C1+this.C2)/2,this.aPrime1=e.A+e.A/2*(1-r(i(this.CBar,7)/(i(this.CBar,7)+i(25,7)))),this.aPrime2=t.A+t.A/2*(1-r(i(this.CBar,7)/(i(this.CBar,7)+i(25,7)))),this.CPrime1=r(i(this.aPrime1,2)+i(e.B,2)),this.CPrime2=r(i(this.aPrime2,2)+i(t.B,2)),this.CBarPrime=(this.CPrime1+this.CPrime2)/2,this.deltaCPrime=this.CPrime2-this.CPrime1,this.SsubL=1+.015*i(this.LBar-50,2)/r(20+i(this.LBar-50,2)),this.SsubC=1+.045*this.CBarPrime,this.hPrime1=0,this.hPrime2=0,this.deltahPrime=0,this.deltaHPrime=0,this.HBarPrime=0,this.T=0,this.SsubH=0,this.RsubT=0}r.prototype.getDeltaE=function(){var e=Math.sqrt,t=Math.sin,n=Math.pow;this.hPrime1=this.gethPrime1(),this.hPrime2=this.gethPrime2(),this.deltahPrime=this.getDeltahPrime(),this.deltaHPrime=2*e(this.CPrime1*this.CPrime2)*t(this.degreesToRadians(this.deltahPrime)/2),this.HBarPrime=this.getHBarPrime(),this.T=this.getT(),this.SsubH=1+.015*this.CBarPrime*this.T,this.RsubT=this.getRsubT();var r=this.deltaLPrime/(this.ksubL*this.SsubL),i=this.deltaCPrime/(this.ksubC*this.SsubC),o=this.deltaHPrime/(this.ksubH*this.SsubH);return e(n(r,2)+n(i,2)+n(o,2)+this.RsubT*i*o)},r.prototype.getRsubT=function(){var e=Math.sin,t=Math.sqrt,n=Math.pow,r=Math.exp;return-2*t(n(this.CBarPrime,7)/(n(this.CBarPrime,7)+n(25,7)))*e(this.degreesToRadians(60*r(-n((this.HBarPrime-275)/25,2))))},r.prototype.getT=function(){var e=Math.cos;return 1-.17*e(this.degreesToRadians(this.HBarPrime-30))+.24*e(this.degreesToRadians(2*this.HBarPrime))+.32*e(this.degreesToRadians(3*this.HBarPrime+6))-.2*e(this.degreesToRadians(4*this.HBarPrime-63))},r.prototype.getHBarPrime=function(){return(0,Math.abs)(this.hPrime1-this.hPrime2)>180?(this.hPrime1+this.hPrime2+360)/2:(this.hPrime1+this.hPrime2)/2},r.prototype.getDeltahPrime=function(){var e=Math.abs;return 0===this.C1||0===this.C2?0:e(this.hPrime1-this.hPrime2)<=180?this.hPrime2-this.hPrime1:this.hPrime2<=this.hPrime1?this.hPrime2-this.hPrime1+360:this.hPrime2-this.hPrime1-360},r.prototype.gethPrime1=function(){return this._gethPrimeFn(this.x1.B,this.aPrime1)},r.prototype.gethPrime2=function(){return this._gethPrimeFn(this.x2.B,this.aPrime2)},r.prototype._gethPrimeFn=function(e,t){var n;return 0===e&&0===t?0:(n=this.radiansToDegrees(Math.atan2(e,t)))>=0?n:n+360},r.prototype.radiansToDegrees=function(e){return e*(180/Math.PI)},r.prototype.degreesToRadians=function(e){return e*(Math.PI/180)},e.exports=r},function(e,t,n){var r=n(25).Buffer,i=n(26),o=i.parseStat,a=i.fsError,l=i.fsErrorForPath,s=i.encodingFromOptions,c=i.NOT_IMPLEMENTED;e.exports.constants={F_OK:0,R_OK:4,W_OK:2,X_OK:1},e.exports.access=c("access"),e.exports.accessSync=function(t,n){n|=0;var r=NSFileManager.defaultManager();switch(n){case 0:canAccess=e.exports.existsSync(t);break;case 1:canAccess=Boolean(Number(r.isExecutableFileAtPath(t)));break;case 2:canAccess=Boolean(Number(r.isWritableFileAtPath(t)));break;case 3:canAccess=Boolean(Number(r.isExecutableFileAtPath(t)))&&Boolean(Number(r.isWritableFileAtPath(t)));break;case 4:canAccess=Boolean(Number(r.isReadableFileAtPath(t)));break;case 5:canAccess=Boolean(Number(r.isReadableFileAtPath(t)))&&Boolean(Number(r.isExecutableFileAtPath(t)));break;case 6:canAccess=Boolean(Number(r.isReadableFileAtPath(t)))&&Boolean(Number(r.isWritableFileAtPath(t)));break;case 7:canAccess=Boolean(Number(r.isReadableFileAtPath(t)))&&Boolean(Number(r.isWritableFileAtPath(t)))&&Boolean(Number(r.isExecutableFileAtPath(t)))}if(!canAccess)throw new Error("Can't access "+String(t))},e.exports.appendFile=c("appendFile"),e.exports.appendFileSync=function(t,n,i){if(!e.exports.existsSync(t))return e.exports.writeFileSync(t,n,i);var o=NSFileHandle.fileHandleForWritingAtPath(t);o.seekToEndOfFile();var a=s(i,"utf8"),l=r.from(n,"NSData"===a||"buffer"===a?void 0:a).toNSData();o.writeData(l)},e.exports.chmod=c("chmod"),e.exports.chmodSync=function(e,t){var n=MOPointer.alloc().init();if(NSFileManager.defaultManager().setAttributes_ofItemAtPath_error({NSFilePosixPermissions:t},e,n),null!==n.value())throw l(e,void 0,n.value())},e.exports.chown=c("chown"),e.exports.chownSync=c("chownSync"),e.exports.close=c("close"),e.exports.closeSync=c("closeSync"),e.exports.copyFile=c("copyFile"),e.exports.copyFileSync=function(e,t,n){var r=MOPointer.alloc().init();if(NSFileManager.defaultManager().copyItemAtPath_toPath_error(e,t,r),null!==r.value())throw l(e,!1,r.value())},e.exports.createReadStream=c("createReadStream"),e.exports.createWriteStream=c("createWriteStream"),e.exports.exists=c("exists"),e.exports.existsSync=function(e){var t=NSFileManager.defaultManager();return Boolean(Number(t.fileExistsAtPath(e)))},e.exports.fchmod=c("fchmod"),e.exports.fchmodSync=c("fchmodSync"),e.exports.fchown=c("fchown"),e.exports.fchownSync=c("fchownSync"),e.exports.fdatasync=c("fdatasync"),e.exports.fdatasyncSync=c("fdatasyncSync"),e.exports.fstat=c("fstat"),e.exports.fstatSync=c("fstatSync"),e.exports.fsync=c("fsync"),e.exports.fsyncSync=c("fsyncSync"),e.exports.ftruncate=c("ftruncate"),e.exports.ftruncateSync=c("ftruncateSync"),e.exports.futimes=c("futimes"),e.exports.futimesSync=c("futimesSync"),e.exports.lchmod=c("lchmod"),e.exports.lchmodSync=c("lchmodSync"),e.exports.lchown=c("lchown"),e.exports.lchownSync=c("lchownSync"),e.exports.link=c("link"),e.exports.linkSync=function(e,t){var n=MOPointer.alloc().init();if(NSFileManager.defaultManager().linkItemAtPath_toPath_error(e,t,n),null!==n.value())throw l(e,void 0,n.value())},e.exports.lstat=c("lstat"),e.exports.lstatSync=function(e){var t=MOPointer.alloc().init(),n=NSFileManager.defaultManager().attributesOfItemAtPath_error(e,t);if(null!==t.value())throw l(e,void 0,t.value());return o(n)},e.exports.mkdir=c("mkdir"),e.exports.mkdirSync=function(e,t){var n=511,r=!1;t&&t.mode&&(n=t.mode),t&&t.recursive&&(r=t.recursive),"number"==typeof t&&(n=t);var i=MOPointer.alloc().init();if(NSFileManager.defaultManager().createDirectoryAtPath_withIntermediateDirectories_attributes_error(e,r,{NSFilePosixPermissions:n},i),null!==i.value())throw new Error(i.value())},e.exports.mkdtemp=c("mkdtemp"),e.exports.mkdtempSync=function(t){var n=t+function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return e.exports.mkdirSync(n),n},e.exports.open=c("open"),e.exports.openSync=c("openSync"),e.exports.read=c("read"),e.exports.readdir=c("readdir"),e.exports.readdirSync=function(e,t){for(var n=s(t,"utf8"),i=NSFileManager.defaultManager().subpathsAtPath(e),o=[],a=0;a<i.length;a++){var l=i[a];o.push("buffer"===n?r.from(l):String(l))}return o},e.exports.readFile=c("readFile"),e.exports.readFileSync=function(e,t){var n=s(t,"buffer"),i=NSFileManager.defaultManager().contentsAtPath(e);if(!i)throw l(e,!1);var o=r.from(i);return"buffer"===n?o:"NSData"===n?o.toNSData():o.toString(n)},e.exports.readlink=c("readlink"),e.exports.readlinkSync=function(e){var t=MOPointer.alloc().init(),n=NSFileManager.defaultManager().destinationOfSymbolicLinkAtPath_error(e,t);if(null!==t.value())throw l(e,void 0,t.value());return String(n)},e.exports.readSync=c("readSync"),e.exports.realpath=c("realpath"),e.exports.realpath.native=c("realpath.native"),e.exports.realpathSync=function(e){return String(NSString.stringWithString(e).stringByResolvingSymlinksInPath())},e.exports.realpathSync.native=c("realpathSync.native"),e.exports.rename=c("rename"),e.exports.renameSync=function(e,t){var n=MOPointer.alloc().init(),r=NSFileManager.defaultManager();r.moveItemAtPath_toPath_error(e,t,n);var i=n.value();if(null!==i){if("NSCocoaErrorDomain"!==String(i.domain())||516!==Number(i.code()))throw l(e,void 0,i);var o=MOPointer.alloc().init();if(r.replaceItemAtURL_withItemAtURL_backupItemName_options_resultingItemURL_error(NSURL.fileURLWithPath(t),NSURL.fileURLWithPath(e),null,NSFileManagerItemReplacementUsingNewMetadataOnly,null,o),null!==o.value())throw l(e,void 0,o.value())}},e.exports.rmdir=c("rmdir"),e.exports.rmdirSync=function(t){var n=MOPointer.alloc().init(),r=NSFileManager.defaultManager();if(!e.exports.lstatSync(t).isDirectory())throw a("ENOTDIR",{path:t,syscall:"rmdir"});if(r.removeItemAtPath_error(t,n),null!==n.value())throw l(t,!0,n.value(),"rmdir")},e.exports.stat=c("stat"),e.exports.statSync=function(t){return e.exports.lstatSync(e.exports.realpathSync(t))},e.exports.symlink=c("symlink"),e.exports.symlinkSync=function(e,t){var n=MOPointer.alloc().init();NSFileManager.defaultManager().createSymbolicLinkAtPath_withDestinationPath_error(t,e,n);if(null!==n.value())throw new Error(n.value())},e.exports.truncate=c("truncate"),e.exports.truncateSync=function(e,t){var n=NSFileHandle.fileHandleForUpdatingAtPath(sFilePath);n.truncateFileAtOffset(t||0),n.closeFile()},e.exports.unlink=c("unlink"),e.exports.unlinkSync=function(t){var n=MOPointer.alloc().init(),r=NSFileManager.defaultManager();if(e.exports.lstatSync(t).isDirectory())throw a("EPERM",{path:t,syscall:"unlink"});r.removeItemAtPath_error(t,n);if(null!==n.value())throw l(t,!1,n.value())},e.exports.unwatchFile=c("unwatchFile"),e.exports.utimes=c("utimes"),e.exports.utimesSync=function(e,t,n){var r=MOPointer.alloc().init();NSFileManager.defaultManager().setAttributes_ofItemAtPath_error({NSFileModificationDate:t},e,r);if(null!==r.value())throw l(e,void 0,r.value())},e.exports.watch=c("watch"),e.exports.watchFile=c("watchFile"),e.exports.write=c("write"),e.exports.writeFile=c("writeFile"),e.exports.writeFileSync=function(e,t,n){var i=s(n,"utf8");r.from(t,"NSData"===i||"buffer"===i?void 0:i).toNSData().writeToFile_atomically(e,!0)},e.exports.writeSync=c("writeSync")},function(e,t){e.exports=require("buffer")},function(e,t){e.exports.parseStat=function(e){return{dev:String(e.NSFileDeviceIdentifier),mode:e.NSFileType|e.NSFilePosixPermissions,nlink:Number(e.NSFileReferenceCount),uid:String(e.NSFileOwnerAccountID),gid:String(e.NSFileGroupOwnerAccountID),size:Number(e.NSFileSize),atimeMs:1e3*Number(e.NSFileModificationDate.timeIntervalSince1970()),mtimeMs:1e3*Number(e.NSFileModificationDate.timeIntervalSince1970()),ctimeMs:1e3*Number(e.NSFileModificationDate.timeIntervalSince1970()),birthtimeMs:1e3*Number(e.NSFileCreationDate.timeIntervalSince1970()),atime:new Date(1e3*Number(e.NSFileModificationDate.timeIntervalSince1970())+.5),mtime:new Date(1e3*Number(e.NSFileModificationDate.timeIntervalSince1970())+.5),ctime:new Date(1e3*Number(e.NSFileModificationDate.timeIntervalSince1970())+.5),birthtime:new Date(1e3*Number(e.NSFileCreationDate.timeIntervalSince1970())+.5),isBlockDevice:function(){return e.NSFileType===NSFileTypeBlockSpecial},isCharacterDevice:function(){return e.NSFileType===NSFileTypeCharacterSpecial},isDirectory:function(){return e.NSFileType===NSFileTypeDirectory},isFIFO:function(){return!1},isFile:function(){return e.NSFileType===NSFileTypeRegular},isSocket:function(){return e.NSFileType===NSFileTypeSocket},isSymbolicLink:function(){return e.NSFileType===NSFileTypeSymbolicLink}}};var n={EPERM:{message:"operation not permitted",errno:-1},ENOENT:{message:"no such file or directory",errno:-2},EACCES:{message:"permission denied",errno:-13},ENOTDIR:{message:"not a directory",errno:-20},EISDIR:{message:"illegal operation on a directory",errno:-21}};function r(e,t){var r=new Error(e+": "+n[e].message+", "+(t.syscall||"")+(t.path?" '"+t.path+"'":""));return Object.keys(t).forEach((function(e){r[e]=t[e]})),r.code=e,r.errno=n[e].errno,r}e.exports.fsError=r,e.exports.fsErrorForPath=function(t,n,i,o){var a=NSFileManager.defaultManager();if(!a.fileExistsAtPath(t))return r("ENOENT",{path:t,syscall:o||"open"});if(!a.isReadableFileAtPath(t))return r("EACCES",{path:t,syscall:o||"open"});if(void 0!==n){var l=e.exports.lstatSync(t).isDirectory();if(l&&!n)return r("EISDIR",{path:t,syscall:o||"read"});if(!l&&n)return r("ENOTDIR",{path:t,syscall:o||"read"})}return new Error(i||"Unknown error while manipulating "+t)},e.exports.encodingFromOptions=function(e,t){return e&&e.encoding?String(e.encoding):e?String(e):t},e.exports.NOT_IMPLEMENTED=function(e){return function(){throw new Error("fs."+e+" is not implemented yet. If you feel like implementing it, any contribution will be gladly accepted on https://github.com/skpm/fs")}}},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/16948639fdef51e50a3dd45251fbaa1f.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/01e49844551a9879f21264f7d05e2363.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"MergeSimilarLayerStyles",(function(){return h})),n.d(t,"MergeDuplicateLayerStyles",(function(){return f})),n.d(t,"MergeSelectedLayerStyles",(function(){return m}));var r=n(0),i=n.n(r),o=(n(2),n(3)),a="merge-layerstylesfromlist.webview",l="merge-duplicatelayerstyles.webview",s="merge-similarlayerstyles.webview",c=!1,u=[];function d(e,t){var n=0,r=0;o.clog("Merging styles. Keep '"+u[t].name+"'");var i,a,l=o.getAllLayers(e),s=NSMutableArray.array();return u.forEach((function(e){if(e.layerStyle!=u[t].layerStyle){for(var n,r=function(e){return null!=e.originalStyle?NSPredicate.predicateWithFormat("(sharedStyle.objectID == %@) OR (sharedStyle.objectID == %@)",e.originalStyle.localShareID(),e.originalStyle.remoteShareID()):NSPredicate.predicateWithFormat("sharedStyle.objectID == %@",e.layerStyle.objectID())}(e),i=l.filteredArrayUsingPredicate(r),o=i.objectEnumerator();n=o.nextObject();)s.addObject(n);if(null!=e.correlativeStyles)for(var a=0;a<e.correlativeStyles.length;a++)for(var c,d=NSPredicate.predicateWithFormat("sharedStyle.objectID == %@",e.correlativeStyles[a].localObject().objectID()),h=(l.filteredArrayUsingPredicate(d),i.objectEnumerator());c=h.nextObject();)s.addObject(c)}})),u[t].foreign&&null!=u[t].library&&(i=MSShareableObjectReference.referenceForShareableObject_inLibrary(u[t].layerStyle,u[t].library),a=AppController.sharedInstance().librariesController().importShareableObjectReference_intoDocument(i,e.document.documentData())),s.forEach((function(e){u[t].foreign&&null!=u[t].library?e.setSharedStyle(a.localSharedStyle()):e.setSharedStyle(u[t].layerStyle),n++})),r+=function(e,t,n,r){var i=0,a=NSMutableArray.array();return n.document.documentData().allSymbols().forEach((function(e){for(var t,r=o.getSymbolInstances(n,e).objectEnumerator();t=r.nextObject();)a.addObject(t)})),a.forEach((function(a){a.overrides();a.availableOverrides().forEach((function(l){var s=[];!function e(t,n,r,i,a,l,s){0;null==t.children()?n.forEach((function(e){if(e.layerStyle!=n[r].layerStyle&&o.isString(t.currentValue())&&((t.currentValue().toString().indexOf(e.layerStyle.objectID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.originalStyle.localShareID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.originalStyle.remoteShareID())>-1)&&i.push(t),null!=e.correlativeStyles)){0;for(var a=0;a<e.correlativeStyles.length;a++)(t.currentValue().toString().indexOf(e.correlativeStyles[a].localObject().objectID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.correlativeStyles[a].localShareID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.correlativeStyles[a].remoteShareID())>-1)&&i.push(t)}})):t.children().forEach((function(t){e(t,n,r,i,a,l+1,s)}))}(l,e,t,s,a,0,n);for(var c=0;c<s.length;c++)e[t].foreign&&null!=e[t].library?a.setValue_forOverridePoint_(r.localSharedStyle().objectID(),s[c].overridePoint()):a.setValue_forOverridePoint_(e[t].layerStyle.objectID(),s[c].overridePoint()),i++}))})),i}(u,t,e,a),u.forEach((function(n){if(n.layerStyle!=u[t].layerStyle)if(n.foreign&&null==n.library){if(e.document.documentData().foreignLayerStyles().indexOf(n.originalStyle)>-1&&e.document.documentData().foreignLayerStyles().removeObject(n.originalStyle),null!=n.correlativeStyles)for(var r=0;r<n.correlativeStyles.length;r++)e.document.documentData().foreignLayerStyles().indexOf(n.correlativeStyles[r])>-1&&e.document.documentData().foreignLayerStyles().removeObject(n.correlativeStyles[r])}else e.document.documentData().layerStyles().removeSharedStyle(n.layerStyle)})),[n,r]}function h(e){o.clog("----- Merge similar layer styles -----");var t,r={identifier:s,width:1200,height:700,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},a=new i.a(r),l=a.webContents;o.clog("Loading webview"),a.loadURL(n(30)),a.once("ready-to-show",(function(){a.show()})),l.on("did-finish-load",(function(){o.clog("Webview loaded"),l.executeJavaScript("UpdateSettings(".concat(o.getLibrariesEnabled(),")")).catch(console.error)})),l.on("nativeLog",(function(e){o.clog(e)})),l.on("Cancel",(function(){onShutdown(s)})),l.on("ExecuteMerge",(function(n){o.clog("Execute merge");for(var r=0,i=[0,0],a=0;a<n.length;a++)if(!n[a].isUnchecked&&n[a].selectedIndex>=0){u=[];for(var l=0;l<n[a].similarStyles.length;l++)u.push(t[a].similarStyles[l]);var c=d(e,n[a].selectedIndex);i[0]+=c[0],i[1]+=c[1],r++}onShutdown(s),r<=0?(o.clog("No styles were merged"),e.document.showMessage("No styles were merged")):(o.clog("Updated "+i[0]+" text layers and "+i[1]+" overrides."),e.document.showMessage("Yo ho! We updated "+i[0]+" layers and "+i[1]+" overrides."))})),l.on("RecalculateStyles",(function(n,r,i,a,s,c){o.clog("RecalculateStyles"),t=o.FindAllSimilarLayerStyles(e,n,r,i,a,s,c),l.executeJavaScript("DrawResultsList(".concat(JSON.stringify(t),")")).catch(console.error)}))}function f(e){o.clog("----- Merge duplicate layer styles -----");var t,r={identifier:l,width:1200,height:700,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},a=new i.a(r),s=a.webContents,c=[];function h(n){if(o.clog("Finding duplicate layer styles. Including libraries:"+n),(t=o.getDuplicateLayerStyles(e,n)).length>0){o.GetSpecificLayerStyleData(e,t,0),c=[];for(var r=0;r<t.length;r++)c.push({layerStyleWithDuplicates:t[r],selectedIndex:-1,isUnchecked:!1,isProcessed:0==r})}}h(o.getLibrariesEnabled()),t.length>0?a.loadURL(n(31)):(e.document.showMessage("Looks like there are no layer styles with the same name."),onShutdown(l)),a.once("ready-to-show",(function(){a.show()})),s.on("did-finish-load",(function(){o.clog("Webview loaded"),s.executeJavaScript("DrawStylesList(".concat(JSON.stringify(c),", ").concat(o.getLibrariesEnabled(),")")).catch(console.error)})),s.on("nativeLog",(function(e){o.clog(e)})),s.on("Cancel",(function(){onShutdown(l)})),s.on("RecalculateDuplicates",(function(e){o.clog("Recalculating duplicates"),h(e),s.executeJavaScript("DrawStylesList(".concat(JSON.stringify(c),")")).catch(console.error)})),s.on("GetSelectedStyleData",(function(n){o.GetSpecificLayerStyleData(e,t,n),s.executeJavaScript("ReDrawAfterGettingData(".concat(JSON.stringify(c[n].layerStyleWithDuplicates),",").concat(n,")")).catch(console.error)})),s.on("ExecuteMerge",(function(t){o.clog("Executing Merge");for(var n=0,r=[0,0],i=0;i<t.length;i++)if(o.clog("-- Merging "+c[i].layerStyleWithDuplicates.name),!t[i].isUnchecked&&t[i].selectedIndex>=0){c[i].selectedIndex=t[i].selectedIndex,u=[];for(var a=0;a<c[i].layerStyleWithDuplicates.duplicates.length;a++)u.push(c[i].layerStyleWithDuplicates.duplicates[a]);var s=d(e,t[i].selectedIndex);r[0]+=s[0],r[1]+=s[1],n++}onShutdown(l),n<=0?(o.clog("No styles were merged"),e.document.showMessage("No styles were merged")):(o.clog("Wpdated "+r[0]+" text layers and "+r[1]+" overrides."),e.document.showMessage("Yo ho! We updated "+r[0]+" layers and "+r[1]+" overrides."))}))}function m(e){o.clog("----- Merge selected text styles -----");var t,r,l={identifier:a,width:1200,height:700,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},s=new i.a(l),h=s.webContents,f=0;o.getLibrariesEnabled()||(o.clog("Get local styles list"),f=(t=o.getDefinedLayerStyles(e,!1,null)).length),o.getLibrariesEnabled()&&(o.clog("Get all (including libraries) styles list"),f=(r=o.getDefinedLayerStyles(e,!0,null)).length),f>1?s.loadURL(n(32)):(1==f?e.document.showMessage("There's only 1 layer style. No need to merge."):e.document.showMessage("Looks like there are no layer styles."),onShutdown(a)),s.once("ready-to-show",(function(){s.show()})),h.on("did-finish-load",(function(){o.clog("Webview loaded"),o.getLibrariesEnabled()?h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(r),",").concat(o.getLibrariesEnabled(),")")).catch(console.error):h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(t),",").concat(o.getLibrariesEnabled(),")")).catch(console.error)})),h.on("nativeLog",(function(e){o.clog(e)})),h.on("GetLocalStylesList",(function(){o.clog("Get local styles list"),null==t&&(t=o.getDefinedLayerStyles(e,!1,null)),c=!1,h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(t),")")).catch(console.error)})),h.on("GetAllStylesList",(function(){o.clog("Get all (including libraries) styles list"),null==r&&(r=o.getDefinedLayerStyles(e,!0,null)),c=!0,h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(r),")")).catch(console.error)})),h.on("Cancel",(function(){onShutdown(a)})),h.on("ExecuteMerge",(function(n){o.clog("Executing Merge"),u=[];var i=-1,l=0;if(c)for(s=0;s<r.length;s++)r[s].isSelected=n[s].isSelected,r[s].isChosen=n[s].isChosen,n[s].isChosen&&(i=l),n[s].isSelected&&(u.push(r[s]),l++);else for(var s=0;s<t.length;s++)t[s].isSelected=n[s].isSelected,t[s].isChosen=n[s].isChosen,n[s].isChosen&&(i=l),n[s].isSelected&&(u.push(t[s]),l++);var h=d(e,i);o.clog("Updated "+h[0]+" text layers and "+h[1]+" overrides."),e.document.showMessage("Yo ho! We updated "+h[0]+" layers and "+h[1]+" overrides."),onShutdown(a)}))}},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/413c0fb3a3dbad590faa4ec8d201f25b.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/fa4bee1194debaef9ef224fe06b3053c.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/df51bc19ac8f6dc17e869fc98a45545f.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"MergeSimilarTextStyles",(function(){return h})),n.d(t,"MergeDuplicateTextStyles",(function(){return f})),n.d(t,"MergeSelectedTextStyles",(function(){return m}));var r=n(0),i=n.n(r),o=(n(2),n(3)),a="merge-textstylesfromlist.webview",l="merge-duplicatetextstyles.webview",s="merge-similartextstyles.webview",c=!1,u=[];function d(e,t){var n=0,r=0;o.clog("Merging styles. Keep '"+u[t].name+"'");var i,a,l=o.getAllTextLayers(e),s=NSMutableArray.array();return u.forEach((function(e){if(e.textStyle!=u[t].textStyle){for(var n,r=function(e){return null!=e.originalStyle?NSPredicate.predicateWithFormat("(sharedStyle.objectID == %@) OR (sharedStyle.objectID == %@)",e.originalStyle.localShareID(),e.originalStyle.remoteShareID()):NSPredicate.predicateWithFormat("sharedStyle.objectID == %@",e.textStyle.objectID())}(e),i=l.filteredArrayUsingPredicate(r),o=i.objectEnumerator();n=o.nextObject();)s.addObject(n);if(null!=e.correlativeStyles)for(var a=0;a<e.correlativeStyles.length;a++)for(var c,d=NSPredicate.predicateWithFormat("sharedStyle.objectID == %@",e.correlativeStyles[a].localObject().objectID()),h=(l.filteredArrayUsingPredicate(d),i.objectEnumerator());c=h.nextObject();)s.addObject(c)}})),u[t].foreign&&null!=u[t].library&&(i=MSShareableObjectReference.referenceForShareableObject_inLibrary(u[t].textStyle,u[t].library),a=AppController.sharedInstance().librariesController().importShareableObjectReference_intoDocument(i,e.document.documentData())),s.forEach((function(e){u[t].foreign&&null!=u[t].library?e.setSharedStyle(a.localSharedStyle()):e.setSharedStyle(u[t].textStyle),n++})),r+=function(e,t,n,r){var i=0,a=NSMutableArray.array();return n.document.documentData().allSymbols().forEach((function(e){for(var t,r=o.getSymbolInstances(n,e).objectEnumerator();t=r.nextObject();)a.addObject(t)})),a.forEach((function(a){a.overrides();a.availableOverrides().forEach((function(l){var s=[];!function e(t,n,r,i,a,l,s){null==t.children()?n.forEach((function(e){if(e.textStyle!=n[r].textStyle&&o.isString(t.currentValue())&&((t.currentValue().toString().indexOf(e.textStyle.objectID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.originalStyle.localShareID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.originalStyle.remoteShareID())>-1)&&i.push(t),null!=e.correlativeStyles))for(var a=0;a<e.correlativeStyles.length;a++)(t.currentValue().toString().indexOf(e.correlativeStyles[a].localObject().objectID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.correlativeStyles[a].localShareID())>-1||null!=e.originalStyle&&t.currentValue().toString().indexOf(e.correlativeStyles[a].remoteShareID())>-1)&&i.push(t)})):t.children().forEach((function(t){e(t,n,r,i,a,l+1,s)}))}(l,e,t,s,a,0,n);for(var c=0;c<s.length;c++)e[t].foreign&&null!=e[t].library?a.setValue_forOverridePoint_(r.localSharedStyle().objectID(),s[c].overridePoint()):a.setValue_forOverridePoint_(e[t].textStyle.objectID(),s[c].overridePoint()),i++}))})),i}(u,t,e,a),u.forEach((function(n){if(n.textStyle!=u[t].textStyle)if(n.foreign&&null==n.library){if(e.document.documentData().foreignTextStyles().indexOf(n.originalStyle)>-1&&e.document.documentData().foreignTextStyles().removeObject(n.originalStyle),null!=n.correlativeStyles)for(var r=0;r<n.correlativeStyles.length;r++)e.document.documentData().foreignTextStyles().indexOf(n.correlativeStyles[r])>-1&&e.document.documentData().foreignTextStyles().removeObject(n.correlativeStyles[r])}else e.document.documentData().layerTextStyles().removeSharedStyle(n.textStyle)})),[n,r]}function h(e){o.clog("----- Merge similar text styles -----");var t,r={identifier:s,width:1200,height:700,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},a=new i.a(r),l=a.webContents;o.clog("Loading webview"),a.loadURL(n(34)),a.once("ready-to-show",(function(){a.show()})),l.on("did-finish-load",(function(){o.clog("Webview loaded"),l.executeJavaScript("UpdateSettings(".concat(o.getLibrariesEnabled(),")")).catch(console.error)})),l.on("nativeLog",(function(e){o.clog(e)})),l.on("Cancel",(function(){onShutdown(s)})),l.on("ExecuteMerge",(function(n){o.clog("Execute merge");for(var r=0,i=[0,0],a=0;a<n.length;a++)if(!n[a].isUnchecked&&n[a].selectedIndex>=0){u=[];for(var l=0;l<n[a].similarStyles.length;l++)u.push(t[a].similarStyles[l]);var c=d(e,n[a].selectedIndex);i[0]+=c[0],i[1]+=c[1],r++}onShutdown(s),r<=0?(o.clog("No styles were merged"),e.document.showMessage("No styles were merged")):(o.clog("Updated "+i[0]+" text layers and "+i[1]+" overrides."),e.document.showMessage("Yo ho! We updated "+i[0]+" text layers and "+i[1]+" overrides."))})),l.on("RecalculateStyles",(function(n,r,i,a,s,c,u,d,h){o.clog("RecalculateStyles"),t=o.FindAllSimilarTextStyles(e,n,r,i,a,s,c,u,d,h),l.executeJavaScript("DrawResultsList(".concat(JSON.stringify(t),")")).catch(console.error)}))}function f(e){o.clog("----- Merge duplicate text styles -----");var t,r={identifier:l,width:1200,height:700,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},a=new i.a(r),s=a.webContents,c=[];function h(n){if(o.clog("Finding duplicate text styles. Including libraries:"+n),(t=o.getDuplicateTextStyles(e,n)).length>0){o.GetSpecificTextStyleData(e,t,0),c=[];for(var r=0;r<t.length;r++)c.push({textStyleWithDuplicates:t[r],selectedIndex:-1,isUnchecked:!1,isProcessed:0==r})}}h(o.getLibrariesEnabled()),t.length>0?a.loadURL(n(35)):(e.document.showMessage("Looks like there are no text styles with the same name."),onShutdown(l)),a.once("ready-to-show",(function(){a.show()})),s.on("did-finish-load",(function(){o.clog("Webview loaded"),s.executeJavaScript("DrawStylesList(".concat(JSON.stringify(c),", ").concat(o.getLibrariesEnabled(),")")).catch(console.error)})),s.on("nativeLog",(function(e){o.clog(e)})),s.on("Cancel",(function(){onShutdown(l)})),s.on("RecalculateDuplicates",(function(e){o.clog("Recalculating duplicates"),h(e),s.executeJavaScript("DrawStylesList(".concat(JSON.stringify(c),")")).catch(console.error)})),s.on("GetSelectedStyleData",(function(n){o.GetSpecificTextStyleData(e,t,n),s.executeJavaScript("ReDrawAfterGettingData(".concat(JSON.stringify(c[n].textStyleWithDuplicates),",").concat(n,")")).catch(console.error)})),s.on("ExecuteMerge",(function(t){o.clog("Executing Merge");for(var n=0,r=[0,0],i=0;i<t.length;i++)if(o.clog("-- Merging "+c[i].textStyleWithDuplicates.name),!t[i].isUnchecked&&t[i].selectedIndex>=0){c[i].selectedIndex=t[i].selectedIndex,u=[];for(var a=0;a<c[i].textStyleWithDuplicates.duplicates.length;a++)u.push(c[i].textStyleWithDuplicates.duplicates[a]);var s=d(e,t[i].selectedIndex);r[0]+=s[0],r[1]+=s[1],n++}onShutdown(l),n<=0?(o.clog("No styles were merged"),e.document.showMessage("No styles were merged")):(o.clog("Wpdated "+r[0]+" text layers and "+r[1]+" overrides."),e.document.showMessage("Yo ho! We updated "+r[0]+" text layers and "+r[1]+" overrides."))}))}function m(e){o.clog("----- Merge selected text styles -----");var t,r,l={identifier:a,width:1200,height:700,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},s=new i.a(l),h=s.webContents,f=0;o.getLibrariesEnabled()||(o.clog("Get local styles list"),f=(t=o.getDefinedTextStyles(e,!1,null)).length),o.getLibrariesEnabled()&&(o.clog("Get all (including libraries) styles list"),f=(r=o.getDefinedTextStyles(e,!0,null)).length),f>1?s.loadURL(n(36)):(1==f?e.document.showMessage("There's only 1 text style. No need to merge."):e.document.showMessage("Looks like there are no text styles."),onShutdown(a)),s.once("ready-to-show",(function(){s.show()})),h.on("did-finish-load",(function(){o.clog("Webview loaded"),o.getLibrariesEnabled()?h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(r),",").concat(o.getLibrariesEnabled(),")")).catch(console.error):h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(t),",").concat(o.getLibrariesEnabled(),")")).catch(console.error)})),h.on("nativeLog",(function(e){o.clog(e)})),h.on("GetLocalStylesList",(function(){o.clog("Get local styles list"),null==t&&(t=o.getDefinedTextStyles(e,!1,null)),c=!1,h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(t),")")).catch(console.error)})),h.on("GetAllStylesList",(function(){o.clog("Get all (including libraries) styles list"),null==r&&(r=o.getDefinedTextStyles(e,!0,null)),c=!0,h.executeJavaScript("DrawStyleList(".concat(JSON.stringify(r),")")).catch(console.error)})),h.on("Cancel",(function(){onShutdown(a)})),h.on("ExecuteMerge",(function(n){o.clog("Executing Merge"),u=[];var i=-1,l=0;if(c)for(s=0;s<r.length;s++)r[s].isSelected=n[s].isSelected,r[s].isChosen=n[s].isChosen,n[s].isChosen&&(i=l),n[s].isSelected&&(u.push(r[s]),l++);else for(var s=0;s<t.length;s++)t[s].isSelected=n[s].isSelected,t[s].isChosen=n[s].isChosen,n[s].isChosen&&(i=l),n[s].isSelected&&(u.push(t[s]),l++);var h=d(e,i);o.clog("Updated "+h[0]+" text layers and "+h[1]+" overrides."),e.document.showMessage("Yo ho! We updated "+h[0]+" text layers and "+h[1]+" overrides."),onShutdown(a)}))}},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/dde2ede005c583d62d83c0c92e497c1b.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/3e3a6a06320955443557f7abc7fb92be.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/5d8809d23ebcd7f6d64a940997b4f42b.html"},function(e,t,n){"use strict";n.r(t),n.d(t,"EditSettings",(function(){return c})),n.d(t,"onShutdown",(function(){return u}));var r,i=n(0),o=n.n(i),a=n(2),l=n(3),s="merge-duplicates.webviewSettings";function c(e){var t={identifier:s,width:500,height:600,show:!1,remembersWindowFrame:!0,titleBarStyle:"hidden"},i=new o.a(t),a=i.webContents;i.loadURL(n(38)),r=l.getSettings(),i.once("ready-to-show",(function(){i.show()})),a.on("did-finish-load",(function(){a.executeJavaScript("AssignSettings(".concat(l.getLogsEnabled(),",").concat(l.getLibrariesEnabled(),")")).catch(console.error)})),a.on("nativeLog",(function(e){l.clog(e)})),a.on("Cancel",(function(){u(s)})),a.on("AcceptSettings",(function(e,t){var n,i=["licenseKey","","startTime","path","mainPluginsFolderURL","/merge.json","writeTextToFile"];null!=r&&null!=r[i[0]]?n={licenseKey:i[1]+r[i[0]],logs:e,librariesEnabledByDefault:t}:null!=r&&null!=r[i[2]]&&(n={startTime:i[1]+r[i[2]],logs:e,librariesEnabledByDefault:t}),l[i[6]](n,MSPluginManager[i[4]]()[i[3]]()+i[5]),u(s)}))}function u(e){var t=Object(a.getWebview)(e);t&&t.close()}},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/a2c8f96e9048ca31c47d0fa422b26812.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/3abb53f56294c909c723914c0c08a5a2.html"},function(e,t,n){"use strict";n.r(t);var r=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function i(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function o(){}var a="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,u=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),d=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),h=new RegExp("^rgba\\("+[a,a,a,l]+"\\)$"),f=new RegExp("^rgba\\("+[s,s,s,l]+"\\)$"),m=new RegExp("^hsl\\("+[l,s,s]+"\\)$"),S=new RegExp("^hsla\\("+[l,s,s,l]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function p(){return this.rgb().formatRgb()}function b(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?v(t):3===n?new N(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?new N(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?new N(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=u.exec(e))?new N(t[1],t[2],t[3],1):(t=d.exec(e))?new N(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?w(t[1],t[2],t[3],t[4]):(t=f.exec(e))?w(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=m.exec(e))?_(t[1],t[2]/100,t[3]/100,1):(t=S.exec(e))?_(t[1],t[2]/100,t[3]/100,t[4]):g.hasOwnProperty(e)?v(g[e]):"transparent"===e?new N(NaN,NaN,NaN,0):null}function v(e){return new N(e>>16&255,e>>8&255,255&e,1)}function w(e,t,n,r){return r<=0&&(e=t=n=NaN),new N(e,t,n,r)}function x(e){return e instanceof o||(e=b(e)),e?new N((e=e.rgb()).r,e.g,e.b,e.opacity):new N}function M(e,t,n,r){return 1===arguments.length?x(e):new N(e,t,n,null==r?1:r)}function N(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function D(){return"#"+E(this.r)+E(this.g)+E(this.b)}function C(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function E(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function _(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new F(e,t,n,r)}function k(e){if(e instanceof F)return new F(e.h,e.s,e.l,e.opacity);if(e instanceof o||(e=b(e)),!e)return new F;if(e instanceof F)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),l=NaN,s=a-i,c=(a+i)/2;return s?(l=t===a?(n-r)/s+6*(n<r):n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,l*=60):s=c>0&&c<1?0:l,new F(l,s,c,e.opacity)}function O(e,t,n,r){return 1===arguments.length?k(e):new F(e,t,n,null==r?1:r)}function F(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function I(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}r(o,b,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return k(this).formatHsl()},formatRgb:p,toString:p}),r(N,M,i(o,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new N(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D,formatHex:D,formatRgb:C,toString:C})),r(F,O,i(o,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new F(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new F(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new N(I(e>=240?e-240:e+120,i,r),I(e,i,r),I(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var P=Math.PI/180,L=180/Math.PI,R=.96422,T=1,W=.82521,A=4/29,j=6/29,B=3*j*j,U=j*j*j;function V(e){if(e instanceof H)return new H(e.l,e.a,e.b,e.opacity);if(e instanceof Q)return ee(e);e instanceof N||(e=x(e));var t,n,r=X(e.r),i=X(e.g),o=X(e.b),a=G((.2225045*r+.7168786*i+.0606169*o)/T);return r===i&&i===o?t=n=a:(t=G((.4360747*r+.3850649*i+.1430804*o)/R),n=G((.0139322*r+.0971045*i+.7141733*o)/W)),new H(116*a-16,500*(t-a),200*(a-n),e.opacity)}function z(e,t){return new H(e,0,0,null==t?1:t)}function J(e,t,n,r){return 1===arguments.length?V(e):new H(e,t,n,null==r?1:r)}function H(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function G(e){return e>U?Math.pow(e,1/3):e/B+A}function K(e){return e>j?e*e*e:B*(e-A)}function q(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function X(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Z(e){if(e instanceof Q)return new Q(e.h,e.c,e.l,e.opacity);if(e instanceof H||(e=V(e)),0===e.a&&0===e.b)return new Q(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*L;return new Q(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Y(e,t,n,r){return 1===arguments.length?Z(e):new Q(n,t,e,null==r?1:r)}function $(e,t,n,r){return 1===arguments.length?Z(e):new Q(e,t,n,null==r?1:r)}function Q(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ee(e){if(isNaN(e.h))return new H(e.l,0,0,e.opacity);var t=e.h*P;return new H(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}r(H,J,i(o,{brighter:function(e){return new H(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new H(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new N(q(3.1338561*(t=R*K(t))-1.6168667*(e=T*K(e))-.4906146*(n=W*K(n))),q(-.9787684*t+1.9161415*e+.033454*n),q(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),r(Q,$,i(o,{brighter:function(e){return new Q(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Q(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return ee(this).rgb()}}));var te=-.14861,ne=1.78277,re=-.29227,ie=-.90649,oe=1.97294,ae=oe*ie,le=oe*ne,se=ne*re-ie*te;function ce(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof ue)return new ue(e.h,e.s,e.l,e.opacity);e instanceof N||(e=x(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(se*r+ae*t-le*n)/(se+ae-le),o=r-i,a=(oe*(n-i)-re*o)/ie,l=Math.sqrt(a*a+o*o)/(oe*i*(1-i)),s=l?Math.atan2(a,o)*L-120:NaN;return new ue(s<0?s+360:s,l,i,e.opacity)}(e):new ue(e,t,n,null==r?1:r)}function ue(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}r(ue,ce,i(o,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new ue(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new ue(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*P,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new N(255*(t+n*(te*r+ne*i)),255*(t+n*(re*r+ie*i)),255*(t+n*(oe*r)),this.opacity)}})),n.d(t,"color",(function(){return b})),n.d(t,"rgb",(function(){return M})),n.d(t,"hsl",(function(){return O})),n.d(t,"lab",(function(){return J})),n.d(t,"hcl",(function(){return $})),n.d(t,"lch",(function(){return Y})),n.d(t,"gray",(function(){return z})),n.d(t,"cubehelix",(function(){return ce}))}]);if("default"===key&&"function"==typeof exports)exports(context);else{if("function"!=typeof exports[key])throw new Error('Missing export named "'+key+'". Your command should contain something like `export function " + key +"() {}`.');exports[key](context)}}catch(err){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw err;process.emit("uncaughtException",err,"uncaughtException")}}globalThis.MergeDuplicateSymbols=__skpm_run.bind(this,"MergeDuplicateSymbols"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.onRun=__skpm_run.bind(this,"default"),globalThis.MergeSelectedSymbols=__skpm_run.bind(this,"MergeSelectedSymbols"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.MergeSelectedTextStyles=__skpm_run.bind(this,"MergeSelectedTextStyles"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.MergeSimilarTextStyles=__skpm_run.bind(this,"MergeSimilarTextStyles"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.MergeSimilarLayerStyles=__skpm_run.bind(this,"MergeSimilarLayerStyles"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.MergeSelectedLayerStyles=__skpm_run.bind(this,"MergeSelectedLayerStyles"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.MergeDuplicateLayerStyles=__skpm_run.bind(this,"MergeDuplicateLayerStyles"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.MergeDuplicateTextStyles=__skpm_run.bind(this,"MergeDuplicateTextStyles"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown"),globalThis.EditSettings=__skpm_run.bind(this,"EditSettings"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown");